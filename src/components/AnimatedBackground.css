/* Modern glassmorphism-friendly animated background */
/* Base container covers viewport and stays behind content */
.animated-background {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  overflow: hidden;
  /* Fallback background (overridden by theme below) */
  background: #0b0b0b;
}

/* Layer: dynamic gradient blobs with gentle parallax */
.bg {
  position: absolute;
  inset: -10%;
  filter: blur(40px);
  opacity: 0.30;
  mix-blend-mode: normal;
  transform: translate3d(0,0,0);
  /* will-change removed to prevent GPU memory overflow - transform3d creates compositing layer */
  animation: float-1 16s ease-in-out infinite;
  background: radial-gradient(60% 60% at 20% 30%, rgba(255, 0, 153, 0.12) 0%, rgba(255, 0, 153, 0) 60%),
              radial-gradient(50% 50% at 80% 20%, rgba(0, 174, 255, 0.12) 0%, rgba(0, 174, 255, 0) 60%),
              radial-gradient(40% 40% at 70% 80%, rgba(0, 255, 163, 0.10) 0%, rgba(0, 255, 163, 0) 60%);
}

.bg2 {
  animation: float-2 20s ease-in-out infinite;
  opacity: 0.35;
}

.bg3 {
  animation: float-3 24s ease-in-out infinite;
  opacity: 0.25;
}

/* Layer: soft vignette for depth */
.animated-background::after {
  content: "";
  position: absolute;
  inset: -5%;
  pointer-events: none;
  background: radial-gradient(120% 80% at 50% 20%, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 55%, rgba(0,0,0,0.10) 85%, rgba(0,0,0,0.18) 100%);
}

/* Optional: super subtle grain to sell glass depth */
.animated-background::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.06;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/feTurbulence%3E%3C/fi lter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.45'/%3E%3C/svg%3E");
  background-size: 220px 220px;
  mix-blend-mode: overlay;
}

/* Keyframes: slow, subtle parallax movement */
@keyframes float-1 {
  0%   { transform: translate3d(0, 0, 0) scale(1); }
  50%  { transform: translate3d(2%, -2%, 0) scale(1.02); }
  100% { transform: translate3d(-1%, 1%, 0) scale(1); }
}
@keyframes float-2 {
  0%   { transform: translate3d(-2%, 1%, 0) scale(1.02); }
  50%  { transform: translate3d(1%, 2%, 0) scale(1); }
  100% { transform: translate3d(-1%, -1%, 0) scale(1.01); }
}
@keyframes float-3 {
  0%   { transform: translate3d(1%, -1%, 0) scale(1); }
  50%  { transform: translate3d(-2%, 1%, 0) scale(1.015); }
  100% { transform: translate3d(1%, 0%, 0) scale(1); }
}

/* Theme bases */
:root[data-theme='dark'] .animated-background {
  background: #000000; /* true black base for contrasty glass */
}
:root[data-theme='light'] .animated-background {
  background: #ffffff; /* white base for clean glass look */
}

/* Theme tint adjustments */
:root[data-theme='dark'] .bg {
  opacity: 0.35;
  filter: blur(48px) saturate(110%);
}
:root[data-theme='light'] .bg {
  opacity: 0.28;
  filter: blur(52px) saturate(95%);
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce) {
  .bg,
  .bg2,
  .bg3 {
    animation: none;
    opacity: 0.18;
  }
}

/* Mobile performance tuning */
@media (max-width: 768px) {
  .bg { opacity: 0.24; filter: blur(36px); }
  .bg2 { opacity: 0.26; }
  .bg3 { opacity: 0.20; }
  .animated-background::after { opacity: 0.9; }
}