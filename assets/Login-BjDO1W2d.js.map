{"version":3,"file":"Login-BjDO1W2d.js","sources":["../../src/pages/Login.jsx"],"sourcesContent":["import { useState } from 'preact/hooks';\nimport { route } from 'preact-router';\nimport { supabase } from '../supabase';\nimport toast from '../components/Toast';\nimport './Auth.css';\n\nexport default function Login() {\n  const [loading, setLoading] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  const handleSocialLogin = async (provider) => {\n    try {\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: provider,\n      });\n      if (error) throw error;\n    } catch (error) {\n      toast.error(error.error_description || error.message);\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!email) {\n      newErrors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\n      newErrors.email = 'Please enter a valid email';\n    }\n    \n    if (!password) {\n      newErrors.password = 'Password is required';\n    } else if (password.length < 6) {\n      newErrors.password = 'Password must be at least 6 characters';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setErrors({});\n      \n      const { error } = await supabase.auth.signInWithPassword({\n        email: email.trim(),\n        password: password,\n      });\n      \n      if (error) throw error;\n      \n      toast.success('Logged in successfully!');\n      route('/', true);\n    } catch (error) {\n      console.error('Login error:', error);\n      \n      if (error.message.includes('Invalid login credentials')) {\n        setErrors({ general: 'Invalid email or password' });\n      } else if (error.message.includes('Email not confirmed')) {\n        setErrors({ general: 'Please check your email and confirm your account' });\n      } else {\n        setErrors({ general: error.error_description || error.message });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-form\">\n        <h1 className=\"auth-header\">Login</h1>\n        <p className=\"description\">Welcome back! Please login to your account.</p>\n        \n        {errors.general && (\n          <div className=\"error-message\">\n            {errors.general}\n          </div>\n        )}\n        \n        <form onSubmit={handleLogin} noValidate>\n          <div className=\"input-group\">\n            <label htmlFor=\"email\">EMAIL</label>\n            <input\n              id=\"email\"\n              className={`input-field ${errors.email ? 'error' : ''}`}\n              type=\"email\"\n              placeholder=\"Enter your email\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.target.value);\n                if (errors.email) setErrors({ ...errors, email: null });\n              }}\n              required\n              aria-describedby={errors.email ? \"email-error\" : undefined}\n              aria-invalid={!!errors.email}\n            />\n            {errors.email && <span id=\"email-error\" className=\"field-error\" role=\"alert\">{errors.email}</span>}\n          </div>\n          \n          <div className=\"input-group\">\n            <label htmlFor=\"password\">PASSWORD</label>\n            <div className=\"password-input-container\">\n              <input\n                id=\"password\"\n                className={`input-field password-field ${errors.password ? 'error' : ''}`}\n                type={showPassword ? \"text\" : \"password\"}\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => {\n                  setPassword(e.target.value);\n                  if (errors.password) setErrors({ ...errors, password: null });\n                }}\n                required\n                aria-describedby={errors.password ? \"password-error\" : undefined}\n                aria-invalid={!!errors.password}\n              />\n              <button\n                type=\"button\"\n                className=\"password-toggle-eye\"\n                onClick={() => setShowPassword(!showPassword)}\n                aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n              >\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  {showPassword ? (\n                    <>\n                      <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                      <path d=\"M1 1l22 22\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    </>\n                  ) : (\n                    <>\n                      <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                      <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    </>\n                  )}\n                </svg>\n              </button>\n            </div>\n            {errors.password && <span id=\"password-error\" className=\"field-error\" role=\"alert\">{errors.password}</span>}\n          </div>\n          \n          <div className=\"auth-options\">\n            <a href=\"/forgot-password\" className=\"forgot-password-link\">Forgot password?</a>\n          </div>\n\n          <div>\n            <button className=\"button\" disabled={loading}>\n              {loading ? <span>Signing in...</span> : <span>Login</span>}\n            </button>\n          </div>\n        </form>\n        \n        <div className=\"auth-divider\">\n          <span>or</span>\n        </div>\n\n        <div className=\"social-login-group\">\n          <button\n            type=\"button\" className=\"social-button google\"\n            onClick={() => handleSocialLogin('google')}\n          >\n            Sign in with Google\n          </button>\n        </div>\n\n        <div className=\"auth-links\">\n          <p>\n            Don't have an account?\n            <a href=\"/signup\" className=\"button\"> Sign up</a>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Login","loading","setLoading","useState","email","setEmail","password","setPassword","showPassword","setShowPassword","errors","setErrors","handleSocialLogin","provider","error","supabase","toast","validateForm","newErrors","handleLogin","e","route","jsxs","jsx","Fragment"],"mappings":"8IAMA,SAAwBA,GAAQ,CAC9B,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAS,EAAK,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAS,EAAE,EAC/B,CAACG,EAAUC,CAAW,EAAIJ,EAAS,EAAE,EACrC,CAACK,EAAcC,CAAe,EAAIN,EAAS,EAAK,EAChD,CAACO,EAAQC,CAAS,EAAIR,EAAS,CAAA,CAAE,EAEjCS,EAAoB,MAAOC,GAAa,CAC5C,GAAI,CACF,KAAM,CAAE,MAAAC,CAAA,EAAU,MAAMC,EAAS,KAAK,gBAAgB,CACpD,SAAAF,CAAA,CACD,EACD,GAAIC,EAAO,MAAMA,CACnB,OAASA,EAAO,CACdE,EAAM,MAAMF,EAAM,mBAAqBA,EAAM,OAAO,CACtD,CACF,EAEMG,EAAe,IAAM,CACzB,MAAMC,EAAY,CAAA,EAElB,OAAKd,EAEO,eAAe,KAAKA,CAAK,IACnCc,EAAU,MAAQ,8BAFlBA,EAAU,MAAQ,oBAKfZ,EAEMA,EAAS,OAAS,IAC3BY,EAAU,SAAW,0CAFrBA,EAAU,SAAW,uBAKvBP,EAAUO,CAAS,EACZ,OAAO,KAAKA,CAAS,EAAE,SAAW,CAC3C,EAEMC,EAAc,MAAOC,GAAM,CAG/B,GAFAA,EAAE,eAAA,EAEE,EAACH,IAIL,GAAI,CACFf,EAAW,EAAI,EACfS,EAAU,CAAA,CAAE,EAEZ,KAAM,CAAE,MAAAG,CAAA,EAAU,MAAMC,EAAS,KAAK,mBAAmB,CACvD,MAAOX,EAAM,KAAA,EACb,SAAAE,CAAA,CACD,EAED,GAAIQ,EAAO,MAAMA,EAEjBE,EAAM,QAAQ,yBAAyB,EACvCK,EAAM,IAAK,EAAI,CACjB,OAASP,EAAO,CACd,QAAQ,MAAM,eAAgBA,CAAK,EAE/BA,EAAM,QAAQ,SAAS,2BAA2B,EACpDH,EAAU,CAAE,QAAS,4BAA6B,EACzCG,EAAM,QAAQ,SAAS,qBAAqB,EACrDH,EAAU,CAAE,QAAS,mDAAoD,EAEzEA,EAAU,CAAE,QAASG,EAAM,mBAAqBA,EAAM,QAAS,CAEnE,QAAA,CACEZ,EAAW,EAAK,CAClB,CACF,EAEA,SACG,MAAA,CAAI,UAAU,iBACb,SAAAoB,EAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAC,KAAA,CAAG,UAAU,cAAc,SAAA,QAAK,EACjCA,EAAC,IAAA,CAAE,UAAU,cAAc,SAAA,8CAA2C,EAErEb,EAAO,SACNa,EAAC,OAAI,UAAU,gBACZ,WAAO,QACV,EAGFD,EAAC,OAAA,CAAK,SAAUH,EAAa,WAAU,GACrC,SAAA,CAAAG,EAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAC,QAAA,CAAM,QAAQ,QAAQ,SAAA,QAAK,EAC5BA,EAAC,QAAA,CACC,GAAG,QACH,UAAW,eAAeb,EAAO,MAAQ,QAAU,EAAE,GACrD,KAAK,QACL,YAAY,mBACZ,MAAON,EACP,SAAWgB,GAAM,CACff,EAASe,EAAE,OAAO,KAAK,EACnBV,EAAO,OAAOC,EAAU,CAAE,GAAGD,EAAQ,MAAO,KAAM,CACxD,EACA,SAAQ,GACR,mBAAkBA,EAAO,MAAQ,cAAgB,OACjD,eAAc,CAAC,CAACA,EAAO,KAAA,CAAA,EAExBA,EAAO,OAASa,EAAC,OAAA,CAAK,GAAG,cAAc,UAAU,cAAc,KAAK,QAAS,SAAAb,EAAO,KAAA,CAAM,CAAA,EAC7F,EAEAY,EAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAC,QAAA,CAAM,QAAQ,WAAW,SAAA,WAAQ,EAClCD,EAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAC,EAAC,QAAA,CACC,GAAG,WACH,UAAW,8BAA8Bb,EAAO,SAAW,QAAU,EAAE,GACvE,KAAMF,EAAe,OAAS,WAC9B,YAAY,sBACZ,MAAOF,EACP,SAAWc,GAAM,CACfb,EAAYa,EAAE,OAAO,KAAK,EACtBV,EAAO,UAAUC,EAAU,CAAE,GAAGD,EAAQ,SAAU,KAAM,CAC9D,EACA,SAAQ,GACR,mBAAkBA,EAAO,SAAW,iBAAmB,OACvD,eAAc,CAAC,CAACA,EAAO,QAAA,CAAA,EAEzBa,EAAC,SAAA,CACC,KAAK,SACL,UAAU,sBACV,QAAS,IAAMd,EAAgB,CAACD,CAAY,EAC5C,aAAYA,EAAe,gBAAkB,gBAE7C,SAAAe,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,MAAM,6BAC/D,WACCD,EAAAE,EAAA,CACE,SAAA,CAAAD,EAAC,OAAA,CAAK,EAAE,uLAAuL,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,OAAA,CAAO,EACjRA,EAAC,OAAA,CAAK,EAAE,aAAa,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,OAAA,CAAO,CAAA,CAAA,CACzG,EAEAD,EAAAE,EAAA,CACE,SAAA,CAAAD,EAAC,OAAA,CAAK,EAAE,+CAA+C,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,OAAA,CAAO,EACzIA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,IAAI,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,OAAA,CAAO,CAAA,CAAA,CAClH,CAAA,CAEJ,CAAA,CAAA,CACF,EACF,EACCb,EAAO,UAAYa,EAAC,OAAA,CAAK,GAAG,iBAAiB,UAAU,cAAc,KAAK,QAAS,SAAAb,EAAO,QAAA,CAAS,CAAA,EACtG,EAEAa,EAAC,MAAA,CAAI,UAAU,eACb,SAAAA,EAAC,IAAA,CAAE,KAAK,mBAAmB,UAAU,uBAAuB,SAAA,kBAAA,CAAgB,EAC9E,IAEC,MAAA,CACC,SAAAA,EAAC,SAAA,CAAO,UAAU,SAAS,SAAUtB,EAClC,SAAAA,EAAUsB,EAAC,QAAK,SAAA,eAAA,CAAa,IAAW,OAAA,CAAK,SAAA,OAAA,CAAK,EACrD,CAAA,CACF,CAAA,EACF,IAEC,MAAA,CAAI,UAAU,eACb,SAAAA,EAAC,OAAA,CAAK,cAAE,CAAA,CACV,EAEAA,EAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAC,SAAA,CACC,KAAK,SAAS,UAAU,uBACxB,QAAS,IAAMX,EAAkB,QAAQ,EAC1C,SAAA,qBAAA,CAAA,EAGH,EAEAW,EAAC,MAAA,CAAI,UAAU,aACb,WAAC,IAAA,CAAE,SAAA,CAAA,2BAEA,IAAA,CAAE,KAAK,UAAU,UAAU,SAAS,SAAA,UAAA,CAAQ,CAAA,CAAA,CAC/C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}