import{b as ae,a as te,g as L,I as ne,u as n,$ as re}from"./index-DJKKYvGv.js";import{q as j,d as H,A as ie,y as B}from"./react-vendor-BYlzYzcd.js";/* empty css                  */const he=({item:s,type:a,progress:N,duration:x,showDeleteButton:G,onDelete:$,onClick:E,useFullResolution:d=!1})=>{const{id:oe,title:O,name:V,poster_path:Y,still_path:q,vote_average:I,episode_name:w,season_number:A,episode_number:S,first_air_date:C,release_date:T,number_of_seasons:g,status:U,episodes:M,format:le,nextAiringEpisode:v,studios:p,genres:ce}=s,i=q||Y,o=V||O,k=typeof o=="object"&&o!==null?o.english||o.romaji||o.native:o,D=N&&x>0?N/x*100:0,P=T||C?new Date(T||C).getFullYear():null,{user:l}=ae(),{addFavorite:z,removeFavorite:b,isShowFavorited:R,favoritesFetched:W}=te(),m=R(s.id,a,s.season_number,s.episode_number),J=e=>{e.preventDefault(),e.stopPropagation(),l&&(m?a==="anime"?(b(l.id,s.id,"anime"),b(l.id,s.id,"tv")):b(l.id,s.id,a,s.season_number,s.episode_number):z(l.id,{...s,type:a}))},K=e=>{if(e.preventDefault(),e.stopPropagation(),E)E(s);else{const t=a==="anime"&&s.anilist_id?s.anilist_id:s.id;let r=`/watch/${a}/${t}`;(a==="tv"||a==="anime")&&s.season_number&&s.episode_number?r+=`/season/${s.season_number}/episode/${s.episode_number}`:a==="anime"&&(r+="/season/1/episode/1"),re(r)}},Q=j(e=>{const t=e.target;t.onerror=null,t.src="https://via.placeholder.com/400x600/1a1a1a/ffffff?text=No+Image"},[]),F=(()=>{if((a==="tv"||a==="anime")&&A&&S)return`S${A} E${S}${w?`: ${w}`:""}`;const e=[];if(P&&e.push(P.toString()),a==="anime"&&M)e.push(`${M} episodes`);else if(a==="tv"&&g){const t=g===1?"season":"seasons";e.push(`${g} ${t}`)}return e.length>0?e.join(" • "):null})(),X=()=>{if(a!=="anime"||!U)return null;const t={RELEASING:{text:"Airing",class:"airing"},FINISHED:{text:"Completed",class:"completed"},NOT_YET_RELEASED:{text:"Upcoming",class:"upcoming"},CANCELLED:{text:"Cancelled",class:"cancelled"},HIATUS:{text:"Hiatus",class:"hiatus"}}[U];return t?n("div",{className:`anime-status-badge ${t.class}`,children:t.text}):null},Z=()=>{if(a!=="anime"||!v)return null;const e=v.timeUntilAiring;if(e<=0)return null;const t=Math.floor(e/(24*60*60)),r=Math.floor(e%(24*60*60)/(60*60));let h="";return t>0?h=`${t}d ${r}h`:r>0?h=`${r}h`:h="<1h",n("div",{className:"next-episode-info",children:["Ep ",v.episode," in ",h]})},c=j((e,t="w500")=>{if(!e)return"https://via.placeholder.com/500x750/1a1a1a/ffffff?text=No+Image";if(e.startsWith("http"))return L(e);const r=ne.replace("w500",t);return L(`${r}${e}`)},[]),[u,y]=H(!1),[ee,_]=H(()=>c(i,d?"w500":"w200")),f=ie(null);B(()=>{if(!f.current||d)return;const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&!u&&(y(!0),_(c(i,"w500")))})},{rootMargin:"50px",threshold:.1});return e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[i,c,d,u]),B(()=>{_(d?c(i,"w500"):c(i,u?"w500":"w200"))},[i,c,d,u]);const se=n("div",{className:`poster-wrapper ${a==="anime"?"anime-card-enhanced":""}`,children:[n("img",{src:ee,alt:k,loading:"lazy",width:"400",height:"600",onError:Q}),n("div",{className:"scrim"}),X(),D>.01&&n("div",{className:"progress-bar-container",children:n("div",{className:"progress-bar",style:{width:`${Math.min(D,100)}%`}})}),n("div",{className:"card-info",children:[n("div",{className:"title-row",children:[n("h3",{className:"card-title",children:k}),l&&n("button",{className:`favorite-btn ${m?"favorited":""}`,onClick:J,"aria-label":m?"Remove from favorites":"Add to favorites",disabled:!W,style:{color:m?"#ff0000":"var(--text-secondary)"},children:"♥︎"})]}),F&&n("p",{className:"card-subtitle",children:F}),Z(),a==="anime"&&p&&p.length>0&&n("p",{className:"studio-info",children:p[0].name}),n("span",{className:"rating",children:["★ ",I?I.toFixed(1):"N/A"]})]}),G&&n("button",{className:"delete-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),$&&$(s)},children:"×"})]});return n("div",{className:"movie-card-container",ref:f,children:n("div",{className:"movie-card clickable",onClick:K,children:se})})};export{he as M};
//# sourceMappingURL=MovieCard-BNWtjiUN.js.map
