{"version":3,"file":"Favorites-Dx7OeYXL.js","sources":["../../src/pages/Favorites.jsx"],"sourcesContent":["import { h } from 'preact';\nimport './Favorites.css';\nimport Helmet from 'preact-helmet';\nimport { useEffect, useState } from 'preact/hooks';\nimport { useStore } from '../store';\nimport { useAuth } from '../context/Auth';\nimport MovieCard from '../components/MovieCard';\nimport { getProgressForHistoryItems } from '../utils/watchHistory';\n\nconst Favorites = () => {\n    const { user } = useAuth();\n    const favorites = useStore((state) => state.favorites);\n    const [progressData, setProgressData] = useState({});\n\n    useEffect(() => {\n        document.title = 'My Favorites - Fylm';\n    }, []);\n\n    // Fetch progress data when favorites change\n    useEffect(() => {\n        const fetchProgressData = async () => {\n            if (user && favorites.length > 0) {\n                // Convert favorites to the format expected by getProgressForHistoryItems\n                const favoritesAsHistoryItems = favorites.map(fav => ({\n                    media_id: fav.id,\n                    media_type: fav.type,\n                    season_number: fav.season_number || null,\n                    episode_number: fav.episode_number || null\n                }));\n\n                try {\n                    const progressMap = await getProgressForHistoryItems(favoritesAsHistoryItems);\n                    setProgressData(progressMap);\n                } catch (error) {\n                    console.error('Error fetching progress data for favorites:', error);\n                    setProgressData({});\n                }\n            } else {\n                setProgressData({});\n            }\n        };\n\n        fetchProgressData();\n    }, [user, favorites]);\n\n    return (\n        <div class=\"container\">\n            <Helmet>\n                <title>My Favorites - Fylm</title>\n            </Helmet>\n            <h1>My Favorites</h1>\n            {favorites.length > 0 ? (\n                <div class=\"movie-grid\">\n                    {favorites.map(item => {\n                        // Get progress data for this favorite\n                        const progressKey = `${item.id}-${item.type}-${item.season_number || 0}-${item.episode_number || 0}`;\n                        const itemProgress = progressData[progressKey];\n                        \n                        return (\n                            <MovieCard \n                                key={`${item.type}-${item.id}-${item.season_number || 0}-${item.episode_number || 0}`}\n                                item={item} \n                                type={item.type}\n                                progress={itemProgress?.progress_seconds}\n                                duration={itemProgress?.duration_seconds}\n                            />\n                        );\n                    })}\n                </div>\n            ) : (\n                <p>You haven't added any favorites yet.</p>\n            )}\n        </div>\n    );\n};\n\nexport default Favorites; "],"names":["Favorites","user","useAuth","favorites","useStore","state","progressData","setProgressData","useState","useEffect","favoritesAsHistoryItems","fav","progressMap","getProgressForHistoryItems","error","jsxs","jsx","Helmet","item","progressKey","itemProgress","MovieCard"],"mappings":"wOASA,MAAMA,EAAY,IAAM,CACpB,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACXC,EAAYC,EAAUC,GAAUA,EAAM,SAAS,EAC/C,CAACC,EAAcC,CAAe,EAAIC,EAAS,CAAA,CAAE,EAEnDC,OAAAA,EAAU,IAAM,CACZ,SAAS,MAAQ,qBACrB,EAAG,CAAA,CAAE,EAGLA,EAAU,IAAM,EACc,SAAY,CAClC,GAAIR,GAAQE,EAAU,OAAS,EAAG,CAE9B,MAAMO,EAA0BP,EAAU,IAAIQ,IAAQ,CAClD,SAAUA,EAAI,GACd,WAAYA,EAAI,KAChB,cAAeA,EAAI,eAAiB,KACpC,eAAgBA,EAAI,gBAAkB,IAAA,EACxC,EAEF,GAAI,CACA,MAAMC,EAAc,MAAMC,EAA2BH,CAAuB,EAC5EH,EAAgBK,CAAW,CAC/B,OAASE,EAAO,CACZ,QAAQ,MAAM,8CAA+CA,CAAK,EAClEP,EAAgB,CAAA,CAAE,CACtB,CACJ,MACIA,EAAgB,CAAA,CAAE,CAE1B,GAEA,CACJ,EAAG,CAACN,EAAME,CAAS,CAAC,EAGhBY,EAAC,MAAA,CAAI,MAAM,YACP,SAAA,CAAAC,EAACC,EAAA,CACG,SAAAD,EAAC,QAAA,CAAM,SAAA,qBAAA,CAAmB,EAC9B,EACAA,EAAC,MAAG,SAAA,cAAA,CAAY,EACfb,EAAU,OAAS,EAChBa,EAAC,OAAI,MAAM,aACN,SAAAb,EAAU,IAAIe,GAAQ,CAEnB,MAAMC,EAAc,GAAGD,EAAK,EAAE,IAAIA,EAAK,IAAI,IAAIA,EAAK,eAAiB,CAAC,IAAIA,EAAK,gBAAkB,CAAC,GAC5FE,EAAed,EAAaa,CAAW,EAE7C,OACIH,EAACK,EAAA,CAEG,KAAAH,EACA,KAAMA,EAAK,KACX,SAAUE,GAAc,iBACxB,SAAUA,GAAc,gBAAA,EAJnB,GAAGF,EAAK,IAAI,IAAIA,EAAK,EAAE,IAAIA,EAAK,eAAiB,CAAC,IAAIA,EAAK,gBAAkB,CAAC,EAAA,CAO/F,CAAC,CAAA,CACL,EAEAF,EAAC,KAAE,SAAA,sCAAA,CAAoC,CAAA,EAE/C,CAER"}