import{b as u,m as c,t as m}from"./index-tjxQ1Jp0.js";const M=async e=>{const{data:{user:a}}=await c.auth.getUser();if(!a){m.error("You need to be logged in to save favorites.");return}const r=e.id,i=e.type||"tv",{getState:n,setState:o}=u,l=n(),s=`${r}-${i}`;if(l.favoritedMedia.has(s))return;o(t=>({favorites:[{...e,type:i},...t.favorites],favoritedMedia:new Set(t.favoritedMedia).add(s)})),m.success(`'${e.name||e.title}' has been added to your Favorites.`);const{error:f}=await c.from("favorites").insert({user_id:a.id,media_id:r,media_type:i});f&&(console.error("Error adding favorite show:",f),o(t=>{const d=new Set(t.favoritedMedia);return d.delete(s),{favoritedMedia:d,favorites:t.favorites.filter(v=>v.id!==r)}}))},g=async e=>{const{data:{user:a}}=await c.auth.getUser();if(!a)return;const r=e.id,i=e.type||"tv",{getState:n,setState:o}=u,l=`${r}-${i}`,s=n().favorites,f=n().favoritedMedia;o(d=>({favorites:d.favorites.filter(v=>v.id!==r),favoritedMedia:new Set([...d.favoritedMedia].filter(v=>v!==l))})),m.error(`'${e.name||e.title}' has been removed from your Favorites.`);const{error:t}=await c.from("favorites").delete().match({user_id:a.id,media_id:r,media_type:i});t&&(console.error("Error removing favorite show:",t),o({favorites:s,favoritedMedia:f}),m.error(`Failed to remove '${e.name||e.title}' from favorites.`))},p=(e,a="tv")=>u.getState().favoritedMedia.has(`${e}-${a}`);export{M as a,p as i,g as r};
//# sourceMappingURL=favorites-C_UnDF3w.js.map
