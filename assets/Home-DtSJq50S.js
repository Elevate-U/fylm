import{u as e,E as Y,a as ee,b as ge,A as y,L as Z}from"./index-BkQRV82z.js";import{d as g,y as w,k as me}from"./react-vendor-BYlzYzcd.js";import{M as x}from"./MovieCard-BOeeRxEh.js";/* empty css             *//* empty css                  */const ue=()=>e("div",{class:"features-showcase",children:[e("div",{class:"features-hero",children:e("div",{class:"features-hero-content",children:[e("h2",{class:"features-title",children:e("span",{class:"gradient-text",children:"Sign in for the full experience"})}),e("p",{class:"features-subtitle",children:"Get personalized recommendations, track your progress, and never lose your place"})]})}),e("div",{class:"features-grid",children:[{icon:"â¯ï¸",title:"Continue Watching",description:"Pick up exactly where you left off across all your devices. Never lose your place again.",highlight:!0},{icon:"â¤ï¸",title:"Favorites Collection",description:"Save your favorite movies and TV shows in one place for quick access anytime.",highlight:!1},{icon:"ðŸ“š",title:"Watch History",description:"Keep track of everything you've watched and easily find content you enjoyed.",highlight:!1},{icon:"ðŸŽ¯",title:"Personal Progress",description:"Sync your watch progress across devices and resume on any screen seamlessly.",highlight:!1},{icon:"ðŸ”",title:"Smart Recommendations",description:"Get personalized suggestions based on your viewing history and preferences.",highlight:!1},{icon:"âš¡",title:"Enhanced Experience",description:"Unlock the full potential of Fylm with user-specific features and settings.",highlight:!1}].map((d,b)=>e("div",{class:`feature-card ${d.highlight?"featured":""}`,children:[e("div",{class:"feature-icon",children:d.icon}),e("h3",{class:"feature-title",children:d.title}),e("p",{class:"feature-description",children:d.description})]},b))}),e("div",{class:"features-footer",children:[e("div",{class:"features-stats",children:[e("div",{class:"stat",children:[e("span",{class:"stat-number",children:"10K+"}),e("span",{class:"stat-label",children:"Movies & Shows"})]}),e("div",{class:"stat",children:[e("span",{class:"stat-number",children:"4K"}),e("span",{class:"stat-label",children:"Ultra HD Quality"})]}),e("div",{class:"stat",children:[e("span",{class:"stat-number",children:"âˆž"}),e("span",{class:"stat-label",children:"Unlimited Access"})]})]}),e("p",{class:"features-note",children:[e(Y,{href:"/login",class:"subtle-link",children:"Sign in"})," or ",e(Y,{href:"/signup",class:"subtle-link",children:"create an account"})," to unlock these features"]})]})]}),ve=()=>{const{user:l,profile:d}=ee();if(!l)return null;const b=()=>{const m=new Date().getHours();return m<12?"Good morning":m<17?"Good afternoon":"Good evening"},M=()=>{const m=d?.full_name||l.user_metadata?.full_name;return m?m.split(" ")[0]:l.email.split("@")[0]};return e("div",{class:"welcome-message",children:[e("div",{class:"welcome-content",children:[e("h2",{class:"welcome-title",children:[b(),", ",e("span",{class:"user-name",children:M()}),"!"]}),e("p",{class:"welcome-subtitle",children:"What would you like to watch today?"})]}),e("div",{class:"welcome-stats",children:[e("div",{class:"stat-item",children:[e("span",{class:"stat-icon",children:"ðŸŽ¬"}),e("span",{class:"stat-text",children:"Unlimited Movies"})]}),e("div",{class:"stat-item",children:[e("span",{class:"stat-icon",children:"ðŸ“º"}),e("span",{class:"stat-text",children:"TV Shows"})]}),e("div",{class:"stat-item",children:[e("span",{class:"stat-icon",children:"âš¡"}),e("span",{class:"stat-text",children:"HD Streaming"})]})]})]})},Te=l=>{const{trending:d,popularMovies:b,popularTv:M,topRatedMovies:m,topRatedTv:te,upcomingMovies:se,nowPlayingMovies:ne,airingTodayTv:ie,fetchTrending:G,fetchPopularMovies:P,fetchPopularTv:F,fetchTopRatedMovies:R,fetchTopRatedTv:D,fetchUpcomingMovies:V,fetchNowPlayingMovies:A,fetchAiringTodayTv:E,continueWatching:U,continueWatchingFetched:k,fetchContinueWatching:L,fetchFavorites:W,favoritesFetched:j,isFavorited:fe}=ge(),{user:$}=ee(),[s,C]=g("all"),[u,oe]=g("netflix"),[B,K]=g({}),[H,q]=g(!1),[v,I]=g("28"),[z,Q]=g({}),[re,J]=g(!1),[O,X]=g([]);w(()=>{l.path==="/movies"?C("movie"):l.path==="/tv"?C("tv"):C("all")},[l.path]),w(()=>{ae()},[s]),w(()=>{v&&ce(v)},[v,s]),w(()=>{u&&le(u)},[u,s]),w(()=>{G(),P(),F(),R(),D(),V(),A(),E()},[G,P,F,R,D,V,A,E]),w(()=>{$&&!k&&L()},[$,k,L]),w(()=>{$&&!j&&W()},[$,j,W]);const h=(t,o,i)=>{if(!o||o.length===0)return null;const n=o.filter((a,r,c)=>r===c.findIndex(p=>p.id===a.id));return e("section",{class:"home-section",children:[e("h2",{children:t}),e("div",{class:"scrolling-row",children:n.map(a=>e(x,{item:a,type:i||a.media_type},`${t}-${a.id}`))})]})},T=t=>({netflix:"Netflix",prime:"Prime Video",hbo:"Max",disney:"Disney+",apple:"Apple TV+",paramount:"Paramount+"})[t]||t,ae=async()=>{try{const i=await(await fetch(`${y}/tmdb/genre/${s==="all"?"movie":s}/list`)).json();X(i.genres||[]),i.genres&&i.genres.length>0&&!v&&I(i.genres[0].id.toString())}catch(t){console.error("Error fetching genres:",t),X([])}},ce=async t=>{const o=`${s}-${t}`;if(!z[o]){J(!0);try{let i=[];if(s==="all"){const[n,a]=await Promise.all([fetch(`${y}/tmdb/discover/movie?with_genres=${t}&sort_by=popularity.desc&page=1`),fetch(`${y}/tmdb/discover/tv?with_genres=${t}&sort_by=popularity.desc&page=1`)]),r=await n.json(),c=await a.json(),p=(r.results||[]).map(f=>({...f,media_type:"movie"})),_=(c.results||[]).map(f=>({...f,media_type:"tv"}));i=[...p,..._].sort((f,N)=>(N.popularity||0)-(f.popularity||0)).slice(0,20)}else i=((await(await fetch(`${y}/tmdb/discover/${s}?with_genres=${t}&sort_by=popularity.desc&page=1`)).json()).results||[]).map(r=>({...r,media_type:s}));Q(n=>({...n,[o]:i}))}catch(i){console.error("Error fetching content by genre:",i),Q(n=>({...n,[o]:[]}))}finally{J(!1)}}},le=async t=>{const o=`${s}-${t}`;if(!B[o]){q(!0);try{const n={netflix:"8",prime:"9",hbo:"1899",disney:"337",apple:"350",paramount:"531"}[t];if(!n)throw new Error(`Unknown streaming service: ${t}`);let a=[];if(s==="all")try{console.log(`Fetching content for ${t} (${n}) - both movies and TV`);const[r,c]=await Promise.all([fetch(`${y}/tmdb/discover/movie?with_watch_providers=${n}&watch_region=US&sort_by=popularity.desc&page=1`),fetch(`${y}/tmdb/discover/tv?with_watch_providers=${n}&watch_region=US&sort_by=popularity.desc&page=1`)]);if(console.log(`Movie response status: ${r.status}, TV response status: ${c.status}`),!r.ok||!c.ok)throw new Error(`Failed to fetch content from TMDB - Movie: ${r.status}, TV: ${c.status}`);const p=await r.json(),_=await c.json();console.log(`Found ${p.results?.length||0} movies and ${_.results?.length||0} TV shows for ${t}`);const f=(p.results||[]).map(S=>({...S,media_type:"movie"})),N=(_.results||[]).map(S=>({...S,media_type:"tv"}));a=[...f,...N].sort((S,pe)=>(pe.popularity||0)-(S.popularity||0)).slice(0,20)}catch(r){console.error("Error fetching combined content:",r),a=[]}else{console.log(`Fetching ${s} content for ${t} (${n})`);const r=await fetch(`${y}/tmdb/discover/${s}?with_watch_providers=${n}&watch_region=US&sort_by=popularity.desc&page=1`);if(console.log(`${s} response status: ${r.status}`),!r.ok)throw new Error(`Failed to fetch ${s} content from TMDB - Status: ${r.status}`);const c=await r.json();console.log(`Found ${c.results?.length||0} ${s} items for ${t}`),a=(c.results||[]).map(p=>({...p,media_type:s}))}console.log(`Setting streaming content for ${o}:`,a),K(r=>({...r,[o]:a}))}catch(i){console.error("Error fetching content by streaming service:",i),K(n=>({...n,[o]:[]}))}finally{q(!1)}}},de=t=>{const o=`${s}-${t}`,i=B[o]||[];return console.log(`Rendering streaming content for ${o}:`,i.length,"items"),H?e("div",{className:"loading-spinner",children:e("div",{className:"spinner"})}):!i||i.length===0?e("div",{className:"no-content",children:e("p",{children:["No content available for ",T(t)]})}):i.map(n=>e(x,{item:n,type:s==="all"?n.media_type:s},`${t}-${n.id}`))},he=t=>{const o=`${s}-${t}`,i=z[o]||[];return re?e("div",{className:"loading-spinner",children:e("div",{className:"spinner"})}):!i||i.length===0?e("div",{className:"no-content",children:e("p",{children:"No content available for this genre"})}):i.map(n=>e(x,{item:n,type:s==="all"?n.media_type||"movie":s},`genre-${t}-${n.id}`))};return e("div",{class:"container home-page",children:[e("h1",{class:"main-title",children:[s==="movie"&&"Movies",s==="tv"&&"TV Shows",s==="all"&&"Discover"]}),!$&&s==="all"&&e(me,{children:[e("div",{class:"guest-info-banner",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"16px",marginBottom:"24px",textAlign:"center"},children:[e("h3",{style:{margin:"0 0 8px 0",color:"var(--text-primary)"},children:"ðŸŽ¬ Start Streaming Instantly"}),e("p",{style:{margin:"0",color:"var(--text-secondary)"},children:["No account required! Click any movie or TV show to start watching immediately.",e("a",{href:"/login",style:{color:"var(--accent-color)",textDecoration:"none",marginLeft:"4px"},children:"Sign up"})," to save favorites, track progress, and continue watching across devices."]})]}),e(ue,{})]}),$&&s==="all"&&e(ve,{}),k?U.length>0&&e("section",{class:"home-section",children:[e("h2",{children:"Continue Watching"}),e("div",{class:"scrolling-row scrolling-row--compact",children:U.map(t=>e(x,{item:t,type:t.type,progress:t.progress_seconds,duration:t.duration_seconds},`continue-watching-${t.type}-${t.id}`))})]}):e(Z,{text:"Loading your continue watching..."}),s==="all"&&e("section",{class:"home-section streaming-services-section",children:[e("div",{class:"streaming-services-header",children:e("h2",{children:["Series on ",e("span",{class:"streaming-service-name",children:T(u)})]})}),e("div",{class:"streaming-services-tabs",children:["netflix","prime","hbo","disney","apple","paramount"].map(t=>e("button",{class:`streaming-tab ${u===t?"active":""}`,onClick:()=>oe(t),children:T(t)},t))}),e("div",{class:"streaming-content",children:H?e(Z,{text:`Loading ${T(u)} content...`}):e("div",{class:"scrolling-row",children:de(u)})})]}),e("section",{class:"home-section genres-section",children:[e("div",{class:"section-header",children:[e("h2",{children:"Browse by Genre"}),e("span",{class:"genre-name",children:O.find(t=>t.id.toString()===v)?.name||"Loading..."})]}),e("div",{class:"genre-tabs-container",children:e("div",{class:"genre-tabs",children:O.slice(0,8).map(t=>e("button",{class:`genre-tab ${v===t.id.toString()?"active":""}`,onClick:()=>I(t.id.toString()),children:t.name},t.id))})}),e("div",{class:"genre-content",children:e("div",{class:"scrolling-row",children:he(v)})})]}),s==="all"&&h("Trending This Week",d),s!=="tv"&&h("Popular Movies",b,"movie"),s!=="tv"&&h("Now Playing Movies",ne,"movie"),s!=="movie"&&h("Popular TV Shows",M,"tv"),(s==="all"||s==="movie")&&h("Top Rated Movies",m,"movie"),(s==="all"||s==="movie")&&h("Upcoming Movies",se,"movie"),(s==="all"||s==="tv")&&h("Top Rated TV Shows",te,"tv"),(s==="all"||s==="tv")&&h("Airing Today",ie,"tv")]})};export{Te as default};
//# sourceMappingURL=Home-DtSJq50S.js.map
