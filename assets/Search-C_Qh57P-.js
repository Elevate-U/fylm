import{A as T,u as e,L as E}from"./index-B_gc-6eg.js";import{d as h,A as U,y as $}from"./react-vendor-BYlzYzcd.js";import{M as F}from"./MovieCard-BWxubO6M.js";/* empty css             *//* empty css                  */const G=y=>{const[g,c]=h([]),[I,f]=h(!1),[i,S]=h(""),[r,N]=h("all"),[o,w]=h("en-US"),[R,v]=h({anilist:!1,tmdb:!1}),u=U(null),A=U(null);$(()=>{const a=new URLSearchParams(y.url?.split("?")[1]||""),n=a.get("q"),s=a.get("filter")||"all",d=a.get("lang")||"en-US";S(n||""),N(s),w(d),n?m(n,s,d):c([])},[y.url]),$(()=>()=>{u.current&&clearTimeout(u.current),A.current&&clearTimeout(A.current)},[]);const m=async(a,n="all",s=o)=>{f(!0);try{const d=`${T}/search/unified?query=${encodeURIComponent(a)}&type=${n}&language=${encodeURIComponent(s)}`,C=await fetch(d);if(C.ok){const t=await C.json();v({anilist:t.anilist&&Array.isArray(t.anilist)&&t.anilist.length>0,tmdb:t.tmdb&&(t.tmdb.movies&&Array.isArray(t.tmdb.movies)&&t.tmdb.movies.length>0||t.tmdb.tv&&Array.isArray(t.tmdb.tv)&&t.tmdb.tv.length>0)}),t.combined&&Array.isArray(t.combined)?c(t.combined):(console.warn("Combined data is missing or not an array"),c([])),f(!1);return}console.log("Falling back to TMDB search API");const b=await(await fetch(`${T}/tmdb/search/multi?query=${encodeURIComponent(a)}&language=${encodeURIComponent(s)}`)).json();if(b&&b.results){let t=b.results;n!=="all"&&(t=t.filter(l=>l.media_type===n));const D=t.filter(l=>(l.media_type==="movie"||l.media_type==="tv")&&(l.poster_path||l.backdrop_path)).filter((l,B,M)=>B===M.findIndex(P=>P.id===l.id&&P.media_type===l.media_type));c(D),v({anilist:!1,tmdb:!0})}}catch(d){console.error("Error performing search:",d),c([])}finally{f(!1)}},p=a=>{N(a),i.trim()&&m(i,a,o);const n=new URL(window.location);n.searchParams.set("q",i),n.searchParams.set("filter",a),n.searchParams.set("lang",o),window.history.pushState({},"",n.toString())},q=a=>{w(a),i.trim()&&m(i,r,a);const n=new URL(window.location);n.searchParams.set("q",i),n.searchParams.set("filter",r),n.searchParams.set("lang",a),window.history.pushState({},"",n.toString())},L=(a,n,s)=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{a.trim()?m(a.trim(),n,s):(c([]),v({anilist:!1,tmdb:!1}))},500)},_=a=>{const n=a.target.value;S(n);const s=new URL(window.location);s.searchParams.set("q",n),s.searchParams.set("filter",r),s.searchParams.set("lang",o),window.history.replaceState({},"",s.toString()),L(n,r,o)},k=(a,n)=>e("div",{className:"movie-card-container",children:[e(F,{item:a,type:a.media_type||(a.episodes?"anime":"movie"),progress:null,duration:null}),a.source&&e("div",{className:`source-badge source-${a.source}`,children:a.source==="anilist"?"AL":"TMDB"})]},`${a.media_type||"item"}-${a.id}-${n}`);return e("div",{className:"container home-page",children:[e("div",{className:"search-header",children:[e("form",{onSubmit:a=>{a.preventDefault(),i.trim()&&m(i.trim(),r)},className:"search-form-container",children:[e("input",{type:"text",value:i,onInput:_,placeholder:"Search for movies, TV shows, or anime...",className:"search-input-field",autofocus:!0}),e("button",{type:"submit",className:"search-submit-button",children:"Search"})]}),e("h1",{className:"main-title",children:"Search Results"}),e("div",{className:"search-query-display",children:[e("span",{className:"search-label",children:"Showing results for:"}),e("span",{className:"search-query",children:['"',i,'"']})]}),e("div",{className:"search-sources",children:[R.anilist&&e("span",{className:"data-source anilist",children:"AniList"}),R.tmdb&&e("span",{className:"data-source tmdb",children:"TMDB"})]}),e("div",{className:"search-filters",children:[e("button",{className:`filter-btn ${r==="all"?"active":""}`,onClick:()=>p("all"),children:"All"}),e("button",{className:`filter-btn ${r==="movie"?"active":""}`,onClick:()=>p("movie"),children:"Movies"}),e("button",{className:`filter-btn ${r==="tv"?"active":""}`,onClick:()=>p("tv"),children:"TV Shows"}),e("button",{className:`filter-btn ${r==="anime"?"active":""}`,onClick:()=>p("anime"),children:"Anime"})]}),e("div",{className:"language-selector",children:[e("label",{htmlFor:"language-select",className:"language-label",children:"Language:"}),e("select",{id:"language-select",value:o,onChange:a=>q(a.target.value),className:"language-select",children:[e("option",{value:"en-US",children:"English"}),e("option",{value:"es-ES",children:"Espa√±ol"}),e("option",{value:"fr-FR",children:"Fran√ßais"}),e("option",{value:"de-DE",children:"Deutsch"}),e("option",{value:"it-IT",children:"Italiano"}),e("option",{value:"pt-BR",children:"Portugu√™s (Brasil)"}),e("option",{value:"ja-JP",children:"Êó•Êú¨Ë™û"}),e("option",{value:"ko-KR",children:"ÌïúÍµ≠Ïñ¥"}),e("option",{value:"zh-CN",children:"‰∏≠Êñá (ÁÆÄ‰Ωì)"}),e("option",{value:"zh-TW",children:"‰∏≠Êñá (ÁπÅÈ´î)"}),e("option",{value:"ru-RU",children:"–†—É—Å—Å–∫–∏–π"}),e("option",{value:"ar-SA",children:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"}),e("option",{value:"hi-IN",children:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä"}),e("option",{value:"th-TH",children:"‡πÑ‡∏ó‡∏¢"}),e("option",{value:"vi-VN",children:"Ti·∫øng Vi·ªát"})]})]})]}),I?e(E,{text:"Searching across multiple sources..."}):g.length>0?e("section",{className:"home-section",children:[e("h2",{children:["Found ",g.length," result",g.length!==1?"s":""]}),e("div",{className:"movie-grid",children:g.map(k)})]}):i?e("div",{className:"no-results",children:[e("div",{className:"no-results-icon",children:"üîç"}),e("h3",{children:"No results found"}),e("p",{children:[`We couldn't find anything for "`,i,'" in the ',r==="all"?"database":r," category."]}),e("div",{className:"search-suggestions",children:[e("p",{children:"Try:"}),e("ul",{children:[e("li",{children:"Using different keywords or spelling"}),e("li",{children:"Searching in a different category"}),e("li",{children:"Using the title in its original language"}),e("li",{children:"Searching for something more general"})]})]})]}):e("div",{className:"search-welcome",children:[e("div",{className:"search-welcome-icon",children:"üé¨"}),e("h3",{children:"Start your search"}),e("p",{children:"Search across multiple sources including TMDB and AniList."})]})]})};export{G as default};
//# sourceMappingURL=Search-C_Qh57P-.js.map
