{"version":3,"file":"Home-CBllwEwM.js","sources":["../../src/components/FeaturesShowcase.jsx","../../src/components/WelcomeMessage.jsx","../../src/pages/Home.jsx"],"sourcesContent":["import { h } from 'preact';\nimport { Link } from 'preact-router';\nimport './FeaturesShowcase.css';\n\nconst FeaturesShowcase = () => {\n    const features = [\n        {\n            icon: '‚èØÔ∏è',\n            title: 'Continue Watching',\n            description: 'Pick up exactly where you left off across all your devices. Never lose your place again.',\n            highlight: true\n        },\n        {\n            icon: '‚ù§Ô∏è',\n            title: 'Favorites Collection',\n            description: 'Save your favorite movies and TV shows in one place for quick access anytime.',\n            highlight: false\n        },\n        {\n            icon: 'üìö',\n            title: 'Watch History',\n            description: 'Keep track of everything you\\'ve watched and easily find content you enjoyed.',\n            highlight: false\n        },\n        {\n            icon: 'üéØ',\n            title: 'Personal Progress',\n            description: 'Sync your watch progress across devices and resume on any screen seamlessly.',\n            highlight: false\n        },\n        {\n            icon: 'üîç',\n            title: 'Smart Recommendations',\n            description: 'Get personalized suggestions based on your viewing history and preferences.',\n            highlight: false\n        },\n        {\n            icon: '‚ö°',\n            title: 'Enhanced Experience',\n            description: 'Unlock the full potential of Fylm with user-specific features and settings.',\n            highlight: false\n        }\n    ];\n\n    return (\n        <div class=\"features-showcase\">\n            <div class=\"features-hero\">\n                <div class=\"features-hero-content\">\n                    <h2 class=\"features-title\">\n                        <span class=\"gradient-text\">Sign in for the full experience</span>\n                    </h2>\n                    <p class=\"features-subtitle\">\n                        Get personalized recommendations, track your progress, and never lose your place\n                    </p>\n                </div>\n            </div>\n            \n            <div class=\"features-grid\">\n                {features.map((feature, index) => (\n                    <div key={index} class={`feature-card ${feature.highlight ? 'featured' : ''}`}>\n                        <div class=\"feature-icon\">{feature.icon}</div>\n                        <h3 class=\"feature-title\">{feature.title}</h3>\n                        <p class=\"feature-description\">{feature.description}</p>\n                    </div>\n                ))}\n            </div>\n            \n            <div class=\"features-footer\">\n                <div class=\"features-stats\">\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">10K+</span>\n                        <span class=\"stat-label\">Movies & Shows</span>\n                    </div>\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">4K</span>\n                        <span class=\"stat-label\">Ultra HD Quality</span>\n                    </div>\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">‚àû</span>\n                        <span class=\"stat-label\">Unlimited Access</span>\n                    </div>\n                </div>\n                <p class=\"features-note\">\n                    <Link href=\"/login\" class=\"subtle-link\">Sign in</Link> or <Link href=\"/signup\" class=\"subtle-link\">create an account</Link> to unlock these features\n                </p>\n            </div>\n        </div>\n    );\n};\n\nexport default FeaturesShowcase; ","import { h } from 'preact';\nimport { useAuth } from '../context/Auth';\nimport './WelcomeMessage.css';\n\nconst WelcomeMessage = () => {\n    const { user, profile } = useAuth();\n    \n    if (!user) return null;\n\n    const getTimeGreeting = () => {\n        const hour = new Date().getHours();\n        if (hour < 12) return 'Good morning';\n        if (hour < 17) return 'Good afternoon';\n        return 'Good evening';\n    };\n\n    const getFirstName = () => {\n        const name = profile?.full_name || user.user_metadata?.full_name;\n        if (name) {\n            return name.split(' ')[0];\n        }\n        return user.email.split('@')[0];\n    };\n\n    return (\n        <div class=\"welcome-message\">\n            <div class=\"welcome-content\">\n                <h2 class=\"welcome-title\">\n                    {getTimeGreeting()}, <span class=\"user-name\">{getFirstName()}</span>!\n                </h2>\n                <p class=\"welcome-subtitle\">\n                    What would you like to watch today?\n                </p>\n            </div>\n            <div class=\"welcome-stats\">\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">üé¨</span>\n                    <span class=\"stat-text\">Unlimited Movies</span>\n                </div>\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">üì∫</span>\n                    <span class=\"stat-text\">TV Shows</span>\n                </div>\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">‚ö°</span>\n                    <span class=\"stat-text\">HD Streaming</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default WelcomeMessage; ","import { h } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { route } from 'preact-router';\nimport { useStore } from '../store';\nimport MovieCard from '../components/MovieCard';\nimport { getContinueWatching } from '../utils/watchHistory';\nimport { useAuth } from '../context/Auth';\nimport { API_BASE_URL } from '../config';\nimport FeaturesShowcase from '../components/FeaturesShowcase';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport WelcomeMessage from '../components/WelcomeMessage';\nimport SkeletonCard from '../components/SkeletonCard';\nimport './Home.css';\n\nconst Home = (props) => {\n    const { \n        trending, \n        popularMovies, \n        popularTv, \n        topRatedMovies, \n        topRatedTv,\n        upcomingMovies,\n        nowPlayingMovies,\n        airingTodayTv,\n        fetchTrending,\n        fetchPopularMovies,\n        fetchPopularTv,\n        fetchTopRatedMovies,\n        fetchTopRatedTv,\n        fetchUpcomingMovies,\n        fetchNowPlayingMovies,\n        fetchAiringTodayTv,\n        continueWatching,\n        continueWatchingFetched,\n        fetchContinueWatching,\n        fetchFavorites,\n        favoritesFetched,\n        isFavorited,\n        trendingLoading,\n        popularMoviesLoading,\n        popularTvLoading,\n        topRatedMoviesLoading,\n        topRatedTvLoading,\n        upcomingMoviesLoading,\n        nowPlayingMoviesLoading,\n        airingTodayTvLoading\n    } = useStore();\n    \n    const { user } = useAuth(); // Add auth context\n    const [mediaType, setMediaType] = useState('all');\n    const [activeStreamingService, setActiveStreamingService] = useState('netflix');\n    const [streamingContent, setStreamingContent] = useState({});\n    const [loadingStreaming, setLoadingStreaming] = useState(false);\n    const [activeGenre, setActiveGenre] = useState('28'); // Action genre ID\n    const [genreContent, setGenreContent] = useState({});\n    const [loadingGenre, setLoadingGenre] = useState(false);\n    const [genres, setGenres] = useState([]);\n\n    useEffect(() => {\n        if (props.path === '/movies') {\n            setMediaType('movie');\n        } else if (props.path === '/tv') {\n            setMediaType('tv');\n        } else {\n            setMediaType('all');\n        }\n    }, [props.path]);\n\n    // Fetch genres when media type changes\n    useEffect(() => {\n        fetchGenres();\n    }, [mediaType]);\n\n    // Fetch content when active genre changes\n    useEffect(() => {\n        if (activeGenre) {\n            fetchContentByGenre(activeGenre);\n        }\n    }, [activeGenre, mediaType]);\n\n    // Fetch content when active streaming service changes\n    useEffect(() => {\n        if (activeStreamingService) {\n            fetchContentByStreamingService(activeStreamingService);\n        }\n    }, [activeStreamingService, mediaType]);\n\n    useEffect(() => {\n        // Fetch initial data if not already in store\n        fetchTrending();\n        fetchPopularMovies();\n        fetchPopularTv();\n        fetchTopRatedMovies();\n        fetchTopRatedTv();\n        fetchUpcomingMovies();\n        fetchNowPlayingMovies();\n        fetchAiringTodayTv();\n    }, [fetchTrending, fetchPopularMovies, fetchPopularTv, fetchTopRatedMovies, fetchTopRatedTv, fetchUpcomingMovies, fetchNowPlayingMovies, fetchAiringTodayTv]);\n\n    useEffect(() => {\n        if (user && !continueWatchingFetched) {\n            fetchContinueWatching();\n        }\n    }, [user, continueWatchingFetched, fetchContinueWatching]);\n\n    useEffect(() => {\n        if (user && !favoritesFetched) {\n            fetchFavorites();\n        }\n    }, [user, favoritesFetched, fetchFavorites]);\n\n    const getCategoryFromTitle = (title) => {\n        const titleMap = {\n            'Trending This Week': 'trending',\n            'Trending Movies': 'trending',\n            'Popular Movies': 'popular',\n            'Top Rated Movies': 'top-rated',\n            'Upcoming Movies': 'upcoming',\n            'Now Playing Movies': 'now-playing',\n            'Trending TV Shows': 'trending',\n            'Popular TV Shows': 'popular',\n            'Top Rated TV Shows': 'top-rated',\n            'Airing Today': 'airing-today',\n            'On The Air': 'on-the-air'\n        };\n        return titleMap[title] || 'popular';\n    };\n\n    const handleSectionClick = (title, media_type) => {\n        const category = getCategoryFromTitle(title);\n        // Default to 'movie' if media_type is undefined, or use current mediaType state\n        const type = media_type || (mediaType === 'all' ? 'movie' : mediaType);\n        route(`/browse/${type}/${category}`);\n    };\n\n    const renderSection = (title, items, media_type, loading) => {\n        if (loading) {\n            return (\n                <section class=\"home-section\">\n                    <div class=\"section-header\">\n                        <h2>{title}</h2>\n                        <button class=\"view-all-btn\" disabled>\n                            View All <i class=\"fas fa-arrow-right\"></i>\n                        </button>\n                    </div>\n                    <div class=\"scrolling-row\">\n                        {Array.from({ length: 10 }).map((_, index) => (\n                            <SkeletonCard key={`skeleton-${title}-${index}`} />\n                        ))}\n                    </div>\n                </section>\n            );\n        }\n\n        if (!items || items.length === 0) {\n            return null;\n        }\n        \n        const uniqueItems = items.filter((item, index, self) =>\n            index === self.findIndex((t) => t.id === item.id)\n        );\n\n        return (\n            <section class=\"home-section\">\n                <div \n                    class=\"section-header clickable-header\" \n                    onClick={() => handleSectionClick(title, media_type)}\n                >\n                    <h2>{title}</h2>\n                    <button \n                        class=\"view-all-btn\" \n                        onClick={(e) => {\n                            e.stopPropagation();\n                            handleSectionClick(title, media_type);\n                        }}\n                    >\n                        View All <i class=\"fas fa-arrow-right\"></i>\n                    </button>\n                </div>\n                <div class=\"scrolling-row\">\n                    {uniqueItems.map(item => (\n                        <MovieCard \n                            key={`${title}-${item.id}`} \n                            item={item} \n                            type={media_type || item.media_type}\n                        />\n                    ))}\n                </div>\n            </section>\n        );\n    };\n\n    const getStreamingServiceName = (service) => {\n        const serviceNames = {\n            netflix: 'Netflix',\n            prime: 'Prime Video',\n            hbo: 'Max',\n            disney: 'Disney+',\n            apple: 'Apple TV+',\n            paramount: 'Paramount+'\n        };\n        return serviceNames[service] || service;\n    };\n\n    // Fetch genres from TMDB\n    const fetchGenres = async () => {\n        try {\n            // Use 'movie' or 'tv' for genre endpoint, not 'all'\n            const genreType = mediaType === 'all' ? 'movie' : mediaType;\n            const response = await fetch(`${API_BASE_URL}/tmdb/genre/${genreType}/list`);\n            const data = await response.json();\n            setGenres(data.genres || []);\n            // Set first genre as active if none selected\n            if (data.genres && data.genres.length > 0 && !activeGenre) {\n                setActiveGenre(data.genres[0].id.toString());\n            }\n        } catch (error) {\n            console.error('Error fetching genres:', error);\n            setGenres([]);\n        }\n    };\n\n    // Fetch content by genre\n    const fetchContentByGenre = async (genreId) => {\n        const cacheKey = `${mediaType}-${genreId}`;\n        if (genreContent[cacheKey]) return; // Already fetched\n        \n        setLoadingGenre(true);\n        try {\n            let results = [];\n            \n            if (mediaType === 'all') {\n                // For 'all' media type, fetch both movies and TV shows\n                const [movieResponse, tvResponse] = await Promise.all([\n                    fetch(`${API_BASE_URL}/tmdb/discover/movie?with_genres=${genreId}&sort_by=popularity.desc&page=1`),\n                    fetch(`${API_BASE_URL}/tmdb/discover/tv?with_genres=${genreId}&sort_by=popularity.desc&page=1`)\n                ]);\n                \n                const movieData = await movieResponse.json();\n                const tvData = await tvResponse.json();\n                \n                // Add media_type to each item and combine\n                const movies = (movieData.results || []).map(item => ({ ...item, media_type: 'movie' }));\n                const tvShows = (tvData.results || []).map(item => ({ ...item, media_type: 'tv' }));\n                \n                // Combine and sort by popularity\n                results = [...movies, ...tvShows]\n                    .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))\n                    .slice(0, 20); // Limit to 20 items\n            } else {\n                // Use specific media type for discover endpoint\n                const response = await fetch(`${API_BASE_URL}/tmdb/discover/${mediaType}?with_genres=${genreId}&sort_by=popularity.desc&page=1`);\n                const data = await response.json();\n                results = (data.results || []).map(item => ({ ...item, media_type: mediaType }));\n            }\n            \n            setGenreContent(prev => ({\n                ...prev,\n                [cacheKey]: results\n            }));\n        } catch (error) {\n            console.error('Error fetching content by genre:', error);\n            setGenreContent(prev => ({\n                ...prev,\n                [cacheKey]: []\n            }));\n        } finally {\n            setLoadingGenre(false);\n        }\n    };\n\n    // Fetch content by streaming service\n    const fetchContentByStreamingService = async (service) => {\n        const cacheKey = `${mediaType}-${service}`;\n        if (streamingContent[cacheKey]) return; // Already fetched\n        \n        setLoadingStreaming(true);\n        try {\n            // TMDB streaming provider IDs (verified from TMDB API)\n            const providerIds = {\n                netflix: '8',     // Netflix\n                prime: '119',     // Amazon Prime Video  \n                hbo: '384',       // Max (formerly HBO Max)\n                disney: '337',    // Disney Plus\n                apple: '350',     // Apple TV+\n                paramount: '531'  // Paramount+\n            };\n\n            // Dynamic resolver for provider IDs in case TMDB renames/changes them\n            const resolveProviderId = async (svc, typeForProviders) => {\n                try {\n                    const listUrl = `${API_BASE_URL}/tmdb/watch/providers/${typeForProviders}?watch_region=US`;\n                    const resp = await fetch(listUrl);\n                    if (!resp.ok) return null;\n                    const data = await resp.json();\n                    const providers = data.results || [];\n                    const nameSynonyms = {\n                        netflix: ['Netflix'],\n                        prime: ['Prime Video', 'Amazon Prime Video'],\n                        hbo: ['Max', 'HBO Max'],\n                        disney: ['Disney+', 'Disney Plus'],\n                        apple: ['Apple TV+', 'Apple TV Plus'],\n                        paramount: ['Paramount+', 'Paramount Plus']\n                    };\n                    const targets = nameSynonyms[svc] || [svc];\n                    const match = providers.find(p => targets.some(t => (p.provider_name || '').toLowerCase() === t.toLowerCase()));\n                    return match ? String(match.provider_id) : null;\n                } catch (_) {\n                    return null;\n                }\n            };\n            \n            const providerId = providerIds[service];\n            if (!providerId) {\n                throw new Error(`Unknown streaming service: ${service}`);\n            }\n            \n            let results = [];\n            \n            if (mediaType === 'all') {\n                // For 'all' media type, try both movies and TV shows and combine results using TMDB Discover API\n                try {\n                    console.log(`Fetching content for ${service} (${providerId}) - both movies and TV`);\n                    const monetization = encodeURIComponent('flatrate|ads|free');\n                    let [movieResponse, tvResponse] = await Promise.all([\n                        fetch(`${API_BASE_URL}/tmdb/discover/movie?with_watch_providers=${providerId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`),\n                        fetch(`${API_BASE_URL}/tmdb/discover/tv?with_watch_providers=${providerId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`)\n                    ]);\n                    \n                    console.log(`Movie response status: ${movieResponse.status}, TV response status: ${tvResponse.status}`);\n                    \n                    if (!movieResponse.ok || !tvResponse.ok) {\n                        throw new Error(`Failed to fetch content from TMDB - Movie: ${movieResponse.status}, TV: ${tvResponse.status}`);\n                    }\n                    \n                    const movieData = await movieResponse.json();\n                    const tvData = await tvResponse.json();\n\n                    // If nothing found, attempt dynamic provider id resolve and refetch once\n                    if ((!movieData.results || movieData.results.length === 0) && (!tvData.results || tvData.results.length === 0)) {\n                        const dynamicMovieId = await resolveProviderId(service, 'movie');\n                        const dynamicTvId = await resolveProviderId(service, 'tv');\n                        const finalMovieId = dynamicMovieId || providerId;\n                        const finalTvId = dynamicTvId || providerId;\n                        console.log(`Retrying with resolved provider IDs movie=${finalMovieId}, tv=${finalTvId}`);\n                        [movieResponse, tvResponse] = await Promise.all([\n                            fetch(`${API_BASE_URL}/tmdb/discover/movie?with_watch_providers=${finalMovieId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`),\n                            fetch(`${API_BASE_URL}/tmdb/discover/tv?with_watch_providers=${finalTvId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`)\n                        ]);\n                        const [movieRetry, tvRetry] = await Promise.all([movieResponse.json(), tvResponse.json()]);\n                        movieData.results = movieRetry.results || [];\n                        tvData.results = tvRetry.results || [];\n                    }\n                    \n                    console.log(`Found ${movieData.results?.length || 0} movies and ${tvData.results?.length || 0} TV shows for ${service}`);\n                    \n                    // Add media_type to each item and combine\n                    const movies = (movieData.results || []).map(item => ({ ...item, media_type: 'movie' }));\n                    const tvShows = (tvData.results || []).map(item => ({ ...item, media_type: 'tv' }));\n                    \n                    // Combine and sort by popularity\n                    results = [...movies, ...tvShows]\n                        .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))\n                        .slice(0, 20); // Limit to 20 items\n                } catch (error) {\n                    console.error('Error fetching combined content:', error);\n                    results = [];\n                }\n            } else {\n                // For specific media type, use that type with TMDB Discover API\n                console.log(`Fetching ${mediaType} content for ${service} (${providerId})`);\n                const monetization = encodeURIComponent('flatrate|ads|free');\n                let response = await fetch(`${API_BASE_URL}/tmdb/discover/${mediaType}?with_watch_providers=${providerId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`);\n                \n                console.log(`${mediaType} response status: ${response.status}`);\n                \n                if (!response.ok) {\n                    throw new Error(`Failed to fetch ${mediaType} content from TMDB - Status: ${response.status}`);\n                }\n                \n                let data = await response.json();\n                // If empty, try dynamic provider resolution once\n                if (!data.results || data.results.length === 0) {\n                    const dynamicId = await resolveProviderId(service, mediaType);\n                    if (dynamicId && dynamicId !== providerId) {\n                        console.log(`Retrying ${mediaType} with resolved provider ID ${dynamicId}`);\n                        response = await fetch(`${API_BASE_URL}/tmdb/discover/${mediaType}?with_watch_providers=${dynamicId}&with_watch_monetization_types=${monetization}&watch_region=US&sort_by=popularity.desc&page=1`);\n                        if (response.ok) {\n                            data = await response.json();\n                        }\n                    }\n                }\n                console.log(`Found ${data.results?.length || 0} ${mediaType} items for ${service}`);\n                results = (data.results || []).map(item => ({ ...item, media_type: mediaType }));\n            }\n            \n            console.log(`Setting streaming content for ${cacheKey}:`, results);\n            setStreamingContent(prev => ({\n                ...prev,\n                [cacheKey]: results\n            }));\n        } catch (error) {\n            console.error('Error fetching content by streaming service:', error);\n            setStreamingContent(prev => ({\n                ...prev,\n                [cacheKey]: []\n            }));\n        } finally {\n            setLoadingStreaming(false);\n        }\n    };\n\n    const renderStreamingContent = (service) => {\n        const cacheKey = `${mediaType}-${service}`;\n        const content = streamingContent[cacheKey] || [];\n        \n        console.log(`Rendering streaming content for ${cacheKey}:`, content.length, 'items');\n\n        if (loadingStreaming) {\n            return (\n                <div className=\"loading-spinner\">\n                    <div className=\"spinner\"></div>\n                </div>\n            );\n        }\n\n        if (!content || content.length === 0) {\n            return (\n                <div className=\"no-content\">\n                    <p>No content available for {getStreamingServiceName(service)}</p>\n                </div>\n            );\n        }\n\n        return content.map((item) => (\n            <MovieCard \n                key={`${service}-${item.id}`} \n                item={item} \n                type={mediaType === 'all' ? item.media_type : mediaType}\n            />\n        ));\n    };\n\n    const renderGenreContent = (genreId) => {\n        const cacheKey = `${mediaType}-${genreId}`;\n        const content = genreContent[cacheKey] || [];\n\n        if (loadingGenre) {\n            return (\n                <div className=\"loading-spinner\">\n                    <div className=\"spinner\"></div>\n                </div>\n            );\n        }\n\n        if (!content || content.length === 0) {\n            return (\n                <div className=\"no-content\">\n                    <p>No content available for this genre</p>\n                </div>\n            );\n        }\n\n        return content.map((item) => (\n            <MovieCard \n                key={`genre-${genreId}-${item.id}`} \n                item={item} \n                type={mediaType === 'all' ? (item.media_type || 'movie') : mediaType}\n            />\n        ));\n    };\n\n    return (\n        <div class=\"container home-page\">\n            <h1 class=\"main-title\">\n                {mediaType === 'movie' && 'Movies'}\n                {mediaType === 'tv' && 'TV Shows'}\n                {mediaType === 'all' && 'Discover'}\n            </h1>\n\n            {/* Show Features Showcase for non-logged-in users */}\n            {!user && mediaType === 'all' && (\n                <>\n                    <div class=\"guest-info-banner\" style={{\n                        backgroundColor: 'var(--bg-secondary)',\n                        border: '1px solid var(--border-color)',\n                        borderRadius: '8px',\n                        padding: '16px',\n                        marginBottom: '24px',\n                        textAlign: 'center'\n                    }}>\n                        <h3 style={{ margin: '0 0 8px 0', color: 'var(--text-primary)' }}>\n                            üé¨ Start Streaming Instantly\n                        </h3>\n                        <p style={{ margin: '0', color: 'var(--text-secondary)' }}>\n                            No account required! Click any movie or TV show to start watching immediately. \n                            <a href=\"/login\" style={{ color: 'var(--accent-color)', textDecoration: 'none', marginLeft: '4px' }}>\n                                Sign up\n                            </a> to save favorites, track progress, and continue watching across devices.\n                        </p>\n                    </div>\n                    <FeaturesShowcase />\n                </>\n            )}\n            \n            {/* Show Welcome Message for logged-in users */}\n            {user && mediaType === 'all' && (\n                <WelcomeMessage />\n            )}\n\n            {!continueWatchingFetched ? (\n                <LoadingSpinner text=\"Loading your continue watching...\" />\n            ) : continueWatching.length > 0 && (\n                <section class=\"home-section\">\n                    <h2>Continue Watching</h2>\n                    <div class=\"scrolling-row scrolling-row--compact\">\n                        {continueWatching.map(item => (\n                            <MovieCard \n                                key={`continue-watching-${item.type}-${item.id}`} \n                                item={item} \n                                type={item.type} \n                                progress={item.progress_seconds}\n                                duration={item.duration_seconds}\n                            />\n                        ))}\n                    </div>\n                </section>\n            )}\n\n            {/* Streaming Services Section */}\n            {mediaType === 'all' && (\n                <section class=\"home-section streaming-services-section\">\n                    <div class=\"streaming-services-header\">\n                        <h2>Series on <span class=\"streaming-service-name\">{getStreamingServiceName(activeStreamingService)}</span></h2>\n                        <button \n                            class=\"view-all-btn\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                route('/browse/tv/streaming');\n                            }}\n                        >\n                            View All <i class=\"fas fa-arrow-right\"></i>\n                        </button>\n                    </div>\n                    <div class=\"streaming-services-tabs\">\n                        {['netflix', 'prime', 'hbo', 'disney', 'apple', 'paramount'].map(service => (\n                            <button \n                                key={service}\n                                class={`streaming-tab ${activeStreamingService === service ? 'active' : ''}`}\n                                onClick={() => setActiveStreamingService(service)}\n                            >\n                                {getStreamingServiceName(service)}\n                            </button>\n                        ))}\n                    </div>\n                    <div class=\"streaming-content\">\n                        {loadingStreaming ? (\n                            <LoadingSpinner text={`Loading ${getStreamingServiceName(activeStreamingService)} content...`} />\n                        ) : (\n                            <div class=\"scrolling-row\">\n                                {/* Placeholder content - you can replace this with actual API calls */}\n                                {renderStreamingContent(activeStreamingService)}\n                            </div>\n                        )}\n                    </div>\n                </section>\n            )}\n\n            {/* Genres Section */}\n            <section class=\"home-section genres-section\">\n                <div class=\"section-header\">\n                    <h2>Browse by Genre</h2>\n                    <span class=\"genre-name\">\n                        {genres.find(g => g.id.toString() === activeGenre)?.name || 'Loading...'}\n                    </span>\n                    <button \n                        class=\"view-all-btn\"\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            route('/browse/movie/genres');\n                        }}\n                    >\n                        View All <i class=\"fas fa-arrow-right\"></i>\n                    </button>\n                </div>\n                \n                <div class=\"genre-tabs-container\">\n                    <div class=\"genre-tabs\">\n                        {genres.slice(0, 8).map((genre) => (\n                            <button\n                                key={genre.id}\n                                class={`genre-tab ${activeGenre === genre.id.toString() ? 'active' : ''}`}\n                                onClick={() => setActiveGenre(genre.id.toString())}\n                            >\n                                {genre.name}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n                \n                <div class=\"genre-content\">\n                    <div class=\"scrolling-row\">\n                        {renderGenreContent(activeGenre)}\n                    </div>\n                </div>\n            </section>\n\n            {mediaType === 'all' && renderSection('Trending This Week', trending, undefined, trendingLoading)}\n            \n            {mediaType !== 'tv' && renderSection(\"Popular Movies\", popularMovies, 'movie', popularMoviesLoading)}\n            {mediaType !== 'tv' && renderSection(\"Now Playing Movies\", nowPlayingMovies, 'movie', nowPlayingMoviesLoading)}\n            {mediaType !== 'movie' && renderSection(\"Popular TV Shows\", popularTv, 'tv', popularTvLoading)}\n            \n            {(mediaType === 'all' || mediaType === 'movie') && renderSection('Top Rated Movies', topRatedMovies, 'movie', topRatedMoviesLoading)}\n            {(mediaType === 'all' || mediaType === 'movie') && renderSection('Upcoming Movies', upcomingMovies, 'movie', upcomingMoviesLoading)}\n            \n            {(mediaType === 'all' || mediaType === 'tv') && renderSection('Top Rated TV Shows', topRatedTv, 'tv', topRatedTvLoading)}\n            {(mediaType === 'all' || mediaType === 'tv') && renderSection('Airing Today', airingTodayTv, 'tv', airingTodayTvLoading)}\n        </div>\n    );\n};\n\nexport default Home;\n"],"names":["FeaturesShowcase","jsxs","jsx","feature","index","Link","WelcomeMessage","user","profile","useAuth","getTimeGreeting","hour","getFirstName","name","Home","props","trending","popularMovies","popularTv","topRatedMovies","topRatedTv","upcomingMovies","nowPlayingMovies","airingTodayTv","fetchTrending","fetchPopularMovies","fetchPopularTv","fetchTopRatedMovies","fetchTopRatedTv","fetchUpcomingMovies","fetchNowPlayingMovies","fetchAiringTodayTv","continueWatching","continueWatchingFetched","fetchContinueWatching","fetchFavorites","favoritesFetched","isFavorited","trendingLoading","popularMoviesLoading","popularTvLoading","topRatedMoviesLoading","topRatedTvLoading","upcomingMoviesLoading","nowPlayingMoviesLoading","airingTodayTvLoading","useStore","mediaType","setMediaType","useState","activeStreamingService","setActiveStreamingService","streamingContent","setStreamingContent","loadingStreaming","setLoadingStreaming","activeGenre","setActiveGenre","genreContent","setGenreContent","loadingGenre","setLoadingGenre","genres","setGenres","useEffect","fetchGenres","fetchContentByGenre","fetchContentByStreamingService","getCategoryFromTitle","title","handleSectionClick","media_type","category","route","renderSection","items","loading","_","SkeletonCard","uniqueItems","item","self","t","e","MovieCard","getStreamingServiceName","service","data","API_BASE_URL","error","genreId","cacheKey","results","movieResponse","tvResponse","movieData","tvData","movies","tvShows","b","prev","providerIds","resolveProviderId","svc","typeForProviders","listUrl","resp","providers","targets","match","p","providerId","monetization","dynamicMovieId","dynamicTvId","finalMovieId","finalTvId","movieRetry","tvRetry","a","response","dynamicId","renderStreamingContent","content","renderGenreContent","Fragment","LoadingSpinner","g","genre"],"mappings":"2SAIA,MAAMA,GAAmB,IAyCjBC,EAAC,MAAA,CAAI,MAAM,oBACP,SAAA,CAAAC,EAAC,OAAI,MAAM,gBACP,SAAAD,EAAC,MAAA,CAAI,MAAM,wBACP,SAAA,CAAAC,EAAC,KAAA,CAAG,MAAM,iBACN,SAAAA,EAAC,QAAK,MAAM,gBAAgB,2CAA+B,CAAA,CAC/D,EACAA,EAAC,IAAA,CAAE,MAAM,oBAAoB,SAAA,kFAAA,CAE7B,CAAA,CAAA,CACJ,CAAA,CACJ,IAEC,MAAA,CAAI,MAAM,gBACN,SArDI,CACb,CACI,KAAM,KACN,MAAO,oBACP,YAAa,2FACb,UAAW,EAAA,EAEf,CACI,KAAM,KACN,MAAO,uBACP,YAAa,gFACb,UAAW,EAAA,EAEf,CACI,KAAM,KACN,MAAO,gBACP,YAAa,+EACb,UAAW,EAAA,EAEf,CACI,KAAM,KACN,MAAO,oBACP,YAAa,+EACb,UAAW,EAAA,EAEf,CACI,KAAM,KACN,MAAO,wBACP,YAAa,8EACb,UAAW,EAAA,EAEf,CACI,KAAM,IACN,MAAO,sBACP,YAAa,8EACb,UAAW,EAAA,CACf,EAiBkB,IAAI,CAACC,EAASC,IACpBH,EAAC,OAAgB,MAAO,gBAAgBE,EAAQ,UAAY,WAAa,EAAE,GACvE,SAAA,CAAAD,EAAC,MAAA,CAAI,MAAM,eAAgB,SAAAC,EAAQ,KAAK,EACxCD,EAAC,KAAA,CAAG,MAAM,gBAAiB,WAAQ,MAAM,EACzCA,EAAC,IAAA,CAAE,MAAM,sBAAuB,WAAQ,WAAA,CAAY,CAAA,GAH9CE,CAIV,CACH,EACL,EAEAH,EAAC,MAAA,CAAI,MAAM,kBACP,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,iBACP,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,OACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,cAAc,SAAA,OAAI,EAC9BA,EAAC,OAAA,CAAK,MAAM,aAAa,SAAA,gBAAA,CAAc,CAAA,EAC3C,EACAD,EAAC,MAAA,CAAI,MAAM,OACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,cAAc,SAAA,KAAE,EAC5BA,EAAC,OAAA,CAAK,MAAM,aAAa,SAAA,kBAAA,CAAgB,CAAA,EAC7C,EACAD,EAAC,MAAA,CAAI,MAAM,OACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,cAAc,SAAA,IAAC,EAC3BA,EAAC,OAAA,CAAK,MAAM,aAAa,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAC7C,CAAA,EACJ,EACAD,EAAC,IAAA,CAAE,MAAM,gBACL,SAAA,CAAAC,EAACG,GAAA,CAAK,KAAK,SAAS,MAAM,cAAc,SAAA,UAAO,EAAO,SAAKA,GAAA,CAAK,KAAK,UAAU,MAAM,cAAc,SAAA,oBAAiB,EAAO,2BAAA,CAAA,CAC/H,CAAA,CAAA,CACJ,CAAA,EACJ,EClFFC,GAAiB,IAAM,CACzB,KAAM,CAAE,KAAAC,EAAM,QAAAC,CAAA,EAAYC,GAAA,EAE1B,GAAI,CAACF,EAAM,OAAO,KAElB,MAAMG,EAAkB,IAAM,CAC1B,MAAMC,EAAO,IAAI,KAAA,EAAO,SAAA,EACxB,OAAIA,EAAO,GAAW,eAClBA,EAAO,GAAW,iBACf,cACX,EAEMC,EAAe,IAAM,CACvB,MAAMC,EAAOL,GAAS,WAAaD,EAAK,eAAe,UACvD,OAAIM,EACOA,EAAK,MAAM,GAAG,EAAE,CAAC,EAErBN,EAAK,MAAM,MAAM,GAAG,EAAE,CAAC,CAClC,EAEA,OACIN,EAAC,MAAA,CAAI,MAAM,kBACP,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,kBACP,SAAA,CAAAA,EAAC,KAAA,CAAG,MAAM,gBACL,SAAA,CAAAS,EAAA,EAAkB,KAAER,EAAC,OAAA,CAAK,MAAM,YAAa,aAAe,EAAO,GAAA,EACxE,EACAA,EAAC,IAAA,CAAE,MAAM,mBAAmB,SAAA,qCAAA,CAE5B,CAAA,EACJ,EACAD,EAAC,MAAA,CAAI,MAAM,gBACP,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,YACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,KAAE,EAC1BA,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,kBAAA,CAAgB,CAAA,EAC5C,EACAD,EAAC,MAAA,CAAI,MAAM,YACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,KAAE,EAC1BA,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,UAAA,CAAQ,CAAA,EACpC,EACAD,EAAC,MAAA,CAAI,MAAM,YACP,SAAA,CAAAC,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,IAAC,EACzBA,EAAC,OAAA,CAAK,MAAM,YAAY,SAAA,cAAA,CAAY,CAAA,CAAA,CACxC,CAAA,CAAA,CACJ,CAAA,EACJ,CAER,ECpCMY,GAAQC,GAAU,CACpB,KAAM,CACF,SAAAC,EACA,cAAAC,EACA,UAAAC,EACA,eAAAC,EACA,WAAAC,GACA,eAAAC,GACA,iBAAAC,GACA,cAAAC,GACA,cAAAC,EACA,mBAAAC,EACA,eAAAC,EACA,oBAAAC,EACA,gBAAAC,EACA,oBAAAC,EACA,sBAAAC,EACA,mBAAAC,EACA,iBAAAC,EACA,wBAAAC,EACA,sBAAAC,EACA,eAAAC,EACA,iBAAAC,EACA,YAAAC,GACA,gBAAAC,GACA,qBAAAC,GACA,iBAAAC,GACA,sBAAAC,GACA,kBAAAC,GACA,sBAAAC,GACA,wBAAAC,GACA,qBAAAC,EAAA,EACAC,GAAA,EAEE,CAAE,KAAAvC,CAAA,EAASE,GAAA,EACX,CAACsC,EAAWC,CAAY,EAAIC,EAAS,KAAK,EAC1C,CAACC,EAAwBC,EAAyB,EAAIF,EAAS,SAAS,EACxE,CAACG,EAAkBC,CAAmB,EAAIJ,EAAS,CAAA,CAAE,EACrD,CAACK,EAAkBC,CAAmB,EAAIN,EAAS,EAAK,EACxD,CAACO,EAAaC,CAAc,EAAIR,EAAS,IAAI,EAC7C,CAACS,EAAcC,CAAe,EAAIV,EAAS,CAAA,CAAE,EAC7C,CAACW,GAAcC,EAAe,EAAIZ,EAAS,EAAK,EAChD,CAACa,GAAQC,EAAS,EAAId,EAAS,CAAA,CAAE,EAEvCe,EAAU,IAAM,CACRjD,EAAM,OAAS,UACfiC,EAAa,OAAO,EACbjC,EAAM,OAAS,MACtBiC,EAAa,IAAI,EAEjBA,EAAa,KAAK,CAE1B,EAAG,CAACjC,EAAM,IAAI,CAAC,EAGfiD,EAAU,IAAM,CACZC,GAAA,CACJ,EAAG,CAAClB,CAAS,CAAC,EAGdiB,EAAU,IAAM,CACRR,GACAU,GAAoBV,CAAW,CAEvC,EAAG,CAACA,EAAaT,CAAS,CAAC,EAG3BiB,EAAU,IAAM,CACRd,GACAiB,GAA+BjB,CAAsB,CAE7D,EAAG,CAACA,EAAwBH,CAAS,CAAC,EAEtCiB,EAAU,IAAM,CAEZxC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,CACJ,EAAG,CAACP,EAAeC,EAAoBC,EAAgBC,EAAqBC,EAAiBC,EAAqBC,EAAuBC,CAAkB,CAAC,EAE5JiC,EAAU,IAAM,CACRzD,GAAQ,CAAC0B,GACTC,EAAA,CAER,EAAG,CAAC3B,EAAM0B,EAAyBC,CAAqB,CAAC,EAEzD8B,EAAU,IAAM,CACRzD,GAAQ,CAAC6B,GACTD,EAAA,CAER,EAAG,CAAC5B,EAAM6B,EAAkBD,CAAc,CAAC,EAE3C,MAAMiC,GAAwBC,IACT,CACb,qBAAsB,WACtB,kBAAmB,WACnB,iBAAkB,UAClB,mBAAoB,YACpB,kBAAmB,WACnB,qBAAsB,cACtB,oBAAqB,WACrB,mBAAoB,UACpB,qBAAsB,YACtB,eAAgB,eAChB,aAAc,YAAA,GAEFA,CAAK,GAAK,UAGxBC,GAAqB,CAACD,EAAOE,IAAe,CAC9C,MAAMC,EAAWJ,GAAqBC,CAAK,EAG3CI,EAAM,WADOF,IAAexB,IAAc,MAAQ,QAAUA,EACvC,IAAIyB,CAAQ,EAAE,CACvC,EAEME,EAAgB,CAACL,EAAOM,EAAOJ,EAAYK,IAAY,CACzD,GAAIA,EACA,OACI3E,EAAC,UAAA,CAAQ,MAAM,eACX,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,iBACP,SAAA,CAAAC,EAAC,MAAI,SAAAmE,CAAA,CAAM,EACXpE,EAAC,SAAA,CAAO,MAAM,eAAe,SAAQ,GAAC,SAAA,CAAA,YACzBC,EAAC,IAAA,CAAE,MAAM,oBAAA,CAAqB,CAAA,CAAA,CAC3C,CAAA,EACJ,EACAA,EAAC,OAAI,MAAM,gBACN,eAAM,KAAK,CAAE,OAAQ,EAAA,CAAI,EAAE,IAAI,CAAC2E,EAAGzE,IAChCF,EAAC4E,GAAA,CAAA,EAAkB,YAAYT,CAAK,IAAIjE,CAAK,EAAI,CACpD,CAAA,CACL,CAAA,EACJ,EAIR,GAAI,CAACuE,GAASA,EAAM,SAAW,EAC3B,OAAO,KAGX,MAAMI,EAAcJ,EAAM,OAAO,CAACK,EAAM5E,EAAO6E,IAC3C7E,IAAU6E,EAAK,UAAWC,GAAMA,EAAE,KAAOF,EAAK,EAAE,CAAA,EAGpD,OACI/E,EAAC,UAAA,CAAQ,MAAM,eACX,SAAA,CAAAA,EAAC,MAAA,CACG,MAAM,kCACN,QAAS,IAAMqE,GAAmBD,EAAOE,CAAU,EAEnD,SAAA,CAAArE,EAAC,MAAI,SAAAmE,CAAA,CAAM,EACXpE,EAAC,SAAA,CACG,MAAM,eACN,QAAUkF,GAAM,CACZA,EAAE,gBAAA,EACFb,GAAmBD,EAAOE,CAAU,CACxC,EACH,SAAA,CAAA,YACYrE,EAAC,IAAA,CAAE,MAAM,oBAAA,CAAqB,CAAA,CAAA,CAAA,CAC3C,CAAA,CAAA,IAEH,MAAA,CAAI,MAAM,gBACN,SAAA6E,EAAY,IAAIC,GACb9E,EAACkF,EAAA,CAEG,KAAAJ,EACA,KAAMT,GAAcS,EAAK,UAAA,EAFpB,GAAGX,CAAK,IAAIW,EAAK,EAAE,EAAA,CAI/B,CAAA,CACL,CAAA,EACJ,CAER,EAEMK,EAA2BC,IACR,CACjB,QAAS,UACT,MAAO,cACP,IAAK,MACL,OAAQ,UACR,MAAO,YACP,UAAW,YAAA,GAEKA,CAAO,GAAKA,EAI9BrB,GAAc,SAAY,CAC5B,GAAI,CAIA,MAAMsB,EAAO,MADI,MAAM,MAAM,GAAGC,CAAY,eAD1BzC,IAAc,MAAQ,QAAUA,CACkB,OAAO,GAC/C,KAAA,EAC5BgB,GAAUwB,EAAK,QAAU,EAAE,EAEvBA,EAAK,QAAUA,EAAK,OAAO,OAAS,GAAK,CAAC/B,GAC1CC,EAAe8B,EAAK,OAAO,CAAC,EAAE,GAAG,UAAU,CAEnD,OAASE,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C1B,GAAU,CAAA,CAAE,CAChB,CACJ,EAGMG,GAAsB,MAAOwB,GAAY,CAC3C,MAAMC,EAAW,GAAG5C,CAAS,IAAI2C,CAAO,GACxC,GAAI,CAAAhC,EAAaiC,CAAQ,EAEzB,CAAA9B,GAAgB,EAAI,EACpB,GAAI,CACA,IAAI+B,EAAU,CAAA,EAEd,GAAI7C,IAAc,MAAO,CAErB,KAAM,CAAC8C,EAAeC,CAAU,EAAI,MAAM,QAAQ,IAAI,CAClD,MAAM,GAAGN,CAAY,oCAAoCE,CAAO,iCAAiC,EACjG,MAAM,GAAGF,CAAY,iCAAiCE,CAAO,iCAAiC,CAAA,CACjG,EAEKK,EAAY,MAAMF,EAAc,KAAA,EAChCG,EAAS,MAAMF,EAAW,KAAA,EAG1BG,GAAUF,EAAU,SAAW,CAAA,GAAI,IAAIf,IAAS,CAAE,GAAGA,EAAM,WAAY,OAAA,EAAU,EACjFkB,GAAWF,EAAO,SAAW,CAAA,GAAI,IAAIhB,IAAS,CAAE,GAAGA,EAAM,WAAY,IAAA,EAAO,EAGlFY,EAAU,CAAC,GAAGK,EAAQ,GAAGC,CAAO,EAC3B,KAAK,CAAC,EAAGC,KAAOA,EAAE,YAAc,IAAM,EAAE,YAAc,EAAE,EACxD,MAAM,EAAG,EAAE,CACpB,MAIIP,IADa,MADI,MAAM,MAAM,GAAGJ,CAAY,kBAAkBzC,CAAS,gBAAgB2C,CAAO,iCAAiC,GACnG,KAAA,GACZ,SAAW,CAAA,GAAI,IAAIV,IAAS,CAAE,GAAGA,EAAM,WAAYjC,CAAA,EAAY,EAGnFY,EAAgByC,IAAS,CACrB,GAAGA,EACH,CAACT,CAAQ,EAAGC,CAAA,EACd,CACN,OAASH,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,EACvD9B,EAAgByC,IAAS,CACrB,GAAGA,EACH,CAACT,CAAQ,EAAG,CAAA,CAAC,EACf,CACN,QAAA,CACI9B,GAAgB,EAAK,CACzB,EACJ,EAGMM,GAAiC,MAAOmB,GAAY,CACtD,MAAMK,EAAW,GAAG5C,CAAS,IAAIuC,CAAO,GACxC,GAAI,CAAAlC,EAAiBuC,CAAQ,EAE7B,CAAApC,EAAoB,EAAI,EACxB,GAAI,CAEA,MAAM8C,EAAc,CAChB,QAAS,IACT,MAAO,MACP,IAAK,MACL,OAAQ,MACR,MAAO,MACP,UAAW,KAAA,EAITC,EAAoB,MAAOC,EAAKC,IAAqB,CACvD,GAAI,CACA,MAAMC,EAAU,GAAGjB,CAAY,yBAAyBgB,CAAgB,mBAClEE,EAAO,MAAM,MAAMD,CAAO,EAChC,GAAI,CAACC,EAAK,GAAI,OAAO,KAErB,MAAMC,GADO,MAAMD,EAAK,KAAA,GACD,SAAW,CAAA,EAS5BE,EARe,CACjB,QAAS,CAAC,SAAS,EACnB,MAAO,CAAC,cAAe,oBAAoB,EAC3C,IAAK,CAAC,MAAO,SAAS,EACtB,OAAQ,CAAC,UAAW,aAAa,EACjC,MAAO,CAAC,YAAa,eAAe,EACpC,UAAW,CAAC,aAAc,gBAAgB,CAAA,EAEjBL,CAAG,GAAK,CAACA,CAAG,EACnCM,EAAQF,EAAU,KAAKG,GAAKF,EAAQ,KAAK1B,IAAM4B,EAAE,eAAiB,IAAI,YAAA,IAAkB5B,EAAE,YAAA,CAAa,CAAC,EAC9G,OAAO2B,EAAQ,OAAOA,EAAM,WAAW,EAAI,IAC/C,MAAY,CACR,OAAO,IACX,CACJ,EAEME,EAAaV,EAAYf,CAAO,EACtC,GAAI,CAACyB,EACD,MAAM,IAAI,MAAM,8BAA8BzB,CAAO,EAAE,EAG3D,IAAIM,EAAU,CAAA,EAEd,GAAI7C,IAAc,MAEd,GAAI,CACA,QAAQ,IAAI,wBAAwBuC,CAAO,KAAKyB,CAAU,wBAAwB,EAClF,MAAMC,EAAe,mBAAmB,mBAAmB,EAC3D,GAAI,CAACnB,EAAeC,CAAU,EAAI,MAAM,QAAQ,IAAI,CAChD,MAAM,GAAGN,CAAY,6CAA6CuB,CAAU,kCAAkCC,CAAY,iDAAiD,EAC3K,MAAM,GAAGxB,CAAY,0CAA0CuB,CAAU,kCAAkCC,CAAY,iDAAiD,CAAA,CAC3K,EAID,GAFA,QAAQ,IAAI,0BAA0BnB,EAAc,MAAM,yBAAyBC,EAAW,MAAM,EAAE,EAElG,CAACD,EAAc,IAAM,CAACC,EAAW,GACjC,MAAM,IAAI,MAAM,8CAA8CD,EAAc,MAAM,SAASC,EAAW,MAAM,EAAE,EAGlH,MAAMC,EAAY,MAAMF,EAAc,KAAA,EAChCG,EAAS,MAAMF,EAAW,KAAA,EAGhC,IAAK,CAACC,EAAU,SAAWA,EAAU,QAAQ,SAAW,KAAO,CAACC,EAAO,SAAWA,EAAO,QAAQ,SAAW,GAAI,CAC5G,MAAMiB,EAAiB,MAAMX,EAAkBhB,EAAS,OAAO,EACzD4B,EAAc,MAAMZ,EAAkBhB,EAAS,IAAI,EACnD6B,EAAeF,GAAkBF,EACjCK,EAAYF,GAAeH,EACjC,QAAQ,IAAI,6CAA6CI,CAAY,QAAQC,CAAS,EAAE,EACxF,CAACvB,EAAeC,CAAU,EAAI,MAAM,QAAQ,IAAI,CAC5C,MAAM,GAAGN,CAAY,6CAA6C2B,CAAY,kCAAkCH,CAAY,iDAAiD,EAC7K,MAAM,GAAGxB,CAAY,0CAA0C4B,CAAS,kCAAkCJ,CAAY,iDAAiD,CAAA,CAC1K,EACD,KAAM,CAACK,GAAYC,EAAO,EAAI,MAAM,QAAQ,IAAI,CAACzB,EAAc,KAAA,EAAQC,EAAW,KAAA,CAAM,CAAC,EACzFC,EAAU,QAAUsB,GAAW,SAAW,CAAA,EAC1CrB,EAAO,QAAUsB,GAAQ,SAAW,CAAA,CACxC,CAEA,QAAQ,IAAI,SAASvB,EAAU,SAAS,QAAU,CAAC,eAAeC,EAAO,SAAS,QAAU,CAAC,iBAAiBV,CAAO,EAAE,EAGvH,MAAMW,GAAUF,EAAU,SAAW,CAAA,GAAI,IAAIf,IAAS,CAAE,GAAGA,EAAM,WAAY,OAAA,EAAU,EACjFkB,IAAWF,EAAO,SAAW,CAAA,GAAI,IAAIhB,IAAS,CAAE,GAAGA,EAAM,WAAY,IAAA,EAAO,EAGlFY,EAAU,CAAC,GAAGK,EAAQ,GAAGC,EAAO,EAC3B,KAAK,CAACqB,EAAGpB,KAAOA,EAAE,YAAc,IAAMoB,EAAE,YAAc,EAAE,EACxD,MAAM,EAAG,EAAE,CACpB,OAAS9B,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,EACvDG,EAAU,CAAA,CACd,KACG,CAEH,QAAQ,IAAI,YAAY7C,CAAS,gBAAgBuC,CAAO,KAAKyB,CAAU,GAAG,EAC1E,MAAMC,EAAe,mBAAmB,mBAAmB,EAC3D,IAAIQ,EAAW,MAAM,MAAM,GAAGhC,CAAY,kBAAkBzC,CAAS,yBAAyBgE,CAAU,kCAAkCC,CAAY,iDAAiD,EAIvM,GAFA,QAAQ,IAAI,GAAGjE,CAAS,qBAAqByE,EAAS,MAAM,EAAE,EAE1D,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,mBAAmBzE,CAAS,gCAAgCyE,EAAS,MAAM,EAAE,EAGjG,IAAIjC,EAAO,MAAMiC,EAAS,KAAA,EAE1B,GAAI,CAACjC,EAAK,SAAWA,EAAK,QAAQ,SAAW,EAAG,CAC5C,MAAMkC,EAAY,MAAMnB,EAAkBhB,EAASvC,CAAS,EACxD0E,GAAaA,IAAcV,IAC3B,QAAQ,IAAI,YAAYhE,CAAS,8BAA8B0E,CAAS,EAAE,EAC1ED,EAAW,MAAM,MAAM,GAAGhC,CAAY,kBAAkBzC,CAAS,yBAAyB0E,CAAS,kCAAkCT,CAAY,iDAAiD,EAC9LQ,EAAS,KACTjC,EAAO,MAAMiC,EAAS,KAAA,GAGlC,CACA,QAAQ,IAAI,SAASjC,EAAK,SAAS,QAAU,CAAC,IAAIxC,CAAS,cAAcuC,CAAO,EAAE,EAClFM,GAAWL,EAAK,SAAW,CAAA,GAAI,IAAIP,IAAS,CAAE,GAAGA,EAAM,WAAYjC,CAAA,EAAY,CACnF,CAEA,QAAQ,IAAI,iCAAiC4C,CAAQ,IAAKC,CAAO,EACjEvC,EAAoB+C,IAAS,CACzB,GAAGA,EACH,CAACT,CAAQ,EAAGC,CAAA,EACd,CACN,OAASH,EAAO,CACZ,QAAQ,MAAM,+CAAgDA,CAAK,EACnEpC,EAAoB+C,IAAS,CACzB,GAAGA,EACH,CAACT,CAAQ,EAAG,CAAA,CAAC,EACf,CACN,QAAA,CACIpC,EAAoB,EAAK,CAC7B,EACJ,EAEMmE,GAA0BpC,GAAY,CACxC,MAAMK,EAAW,GAAG5C,CAAS,IAAIuC,CAAO,GAClCqC,EAAUvE,EAAiBuC,CAAQ,GAAK,CAAA,EAI9C,OAFA,QAAQ,IAAI,mCAAmCA,CAAQ,IAAKgC,EAAQ,OAAQ,OAAO,EAE/ErE,EAEIpD,EAAC,OAAI,UAAU,kBACX,WAAC,MAAA,CAAI,UAAU,UAAU,CAAA,CAC7B,EAIJ,CAACyH,GAAWA,EAAQ,SAAW,EAE3BzH,EAAC,MAAA,CAAI,UAAU,aACX,WAAC,IAAA,CAAE,SAAA,CAAA,4BAA0BmF,EAAwBC,CAAO,CAAA,CAAA,CAAE,CAAA,CAClE,EAIDqC,EAAQ,IAAK3C,GAChB9E,EAACkF,EAAA,CAEG,KAAAJ,EACA,KAAMjC,IAAc,MAAQiC,EAAK,WAAajC,CAAA,EAFzC,GAAGuC,CAAO,IAAIN,EAAK,EAAE,EAAA,CAIjC,CACL,EAEM4C,GAAsBlC,GAAY,CACpC,MAAMC,EAAW,GAAG5C,CAAS,IAAI2C,CAAO,GAClCiC,EAAUjE,EAAaiC,CAAQ,GAAK,CAAA,EAE1C,OAAI/B,GAEI1D,EAAC,OAAI,UAAU,kBACX,WAAC,MAAA,CAAI,UAAU,UAAU,CAAA,CAC7B,EAIJ,CAACyH,GAAWA,EAAQ,SAAW,IAE1B,MAAA,CAAI,UAAU,aACX,SAAAzH,EAAC,IAAA,CAAE,+CAAmC,CAAA,CAC1C,EAIDyH,EAAQ,IAAK3C,GAChB9E,EAACkF,EAAA,CAEG,KAAAJ,EACA,KAAMjC,IAAc,MAASiC,EAAK,YAAc,QAAWjC,CAAA,EAFtD,SAAS2C,CAAO,IAAIV,EAAK,EAAE,EAAA,CAIvC,CACL,EAEA,OACI/E,EAAC,MAAA,CAAI,MAAM,sBACP,SAAA,CAAAA,EAAC,KAAA,CAAG,MAAM,aACL,SAAA,CAAA8C,IAAc,SAAW,SACzBA,IAAc,MAAQ,WACtBA,IAAc,OAAS,UAAA,EAC5B,EAGC,CAACxC,GAAQwC,IAAc,OACpB9C,EAAA4H,GAAA,CACI,SAAA,CAAA5H,EAAC,MAAA,CAAI,MAAM,oBAAoB,MAAO,CAClC,gBAAiB,sBACjB,OAAQ,gCACR,aAAc,MACd,QAAS,OACT,aAAc,OACd,UAAW,QAAA,EAEX,SAAA,CAAAC,EAAC,KAAA,CAAG,MAAO,CAAE,OAAQ,YAAa,MAAO,qBAAA,EAAyB,SAAA,8BAAA,CAElE,EACAD,EAAC,KAAE,MAAO,CAAE,OAAQ,IAAK,MAAO,yBAA2B,SAAA,CAAA,iFAEvDC,EAAC,IAAA,CAAE,KAAK,SAAS,MAAO,CAAE,MAAO,sBAAuB,eAAgB,OAAQ,WAAY,KAAA,EAAS,SAAA,UAErG,EAAI,2EAAA,CAAA,CACR,CAAA,EACJ,IACCF,GAAA,CAAA,CAAiB,CAAA,EACtB,EAIHO,GAAQwC,IAAc,OACnB7C,EAACI,GAAA,CAAA,CAAe,EAGlB2B,EAEED,EAAiB,OAAS,GAC1B/B,EAAC,UAAA,CAAQ,MAAM,eACX,SAAA,CAAAC,EAAC,MAAG,SAAA,mBAAA,CAAiB,IACpB,MAAA,CAAI,MAAM,uCACN,SAAA8B,EAAiB,IAAIgD,GAClB9E,EAACkF,EAAA,CAEG,KAAAJ,EACA,KAAMA,EAAK,KACX,SAAUA,EAAK,iBACf,SAAUA,EAAK,gBAAA,EAJV,qBAAqBA,EAAK,IAAI,IAAIA,EAAK,EAAE,EAAA,CAMrD,CAAA,CACL,CAAA,EACJ,EAfA9E,EAAC4H,GAAA,CAAe,KAAK,mCAAA,CAAoC,EAmB5D/E,IAAc,OACX9C,EAAC,UAAA,CAAQ,MAAM,0CACX,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,4BACP,SAAA,CAAAA,EAAC,KAAA,CAAG,SAAA,CAAA,eAAW,OAAA,CAAK,MAAM,yBAA0B,SAAAoF,EAAwBnC,CAAsB,CAAA,CAAE,CAAA,EAAO,EAC3GjD,EAAC,SAAA,CACG,MAAM,eACN,QAAUkF,GAAM,CACZA,EAAE,gBAAA,EACFV,EAAM,sBAAsB,CAChC,EACH,SAAA,CAAA,YACYvE,EAAC,IAAA,CAAE,MAAM,oBAAA,CAAqB,CAAA,CAAA,CAAA,CAC3C,EACJ,EACAA,EAAC,MAAA,CAAI,MAAM,0BACN,SAAA,CAAC,UAAW,QAAS,MAAO,SAAU,QAAS,WAAW,EAAE,IAAIoF,GAC7DpF,EAAC,SAAA,CAEG,MAAO,iBAAiBgD,IAA2BoC,EAAU,SAAW,EAAE,GAC1E,QAAS,IAAMnC,GAA0BmC,CAAO,EAE/C,WAAwBA,CAAO,CAAA,EAJ3BA,CAAA,CAMZ,EACL,EACApF,EAAC,OAAI,MAAM,oBACN,WACGA,EAAC4H,GAAA,CAAe,KAAM,WAAWzC,EAAwBnC,CAAsB,CAAC,aAAA,CAAe,EAE/FhD,EAAC,MAAA,CAAI,MAAM,gBAEN,SAAAwH,GAAuBxE,CAAsB,CAAA,CAClD,CAAA,CAER,CAAA,EACJ,EAIJjD,EAAC,UAAA,CAAQ,MAAM,8BACX,SAAA,CAAAA,EAAC,MAAA,CAAI,MAAM,iBACP,SAAA,CAAAC,EAAC,MAAG,SAAA,iBAAA,CAAe,EACnBA,EAAC,OAAA,CAAK,MAAM,aACP,YAAO,KAAK6H,GAAKA,EAAE,GAAG,SAAA,IAAevE,CAAW,GAAG,MAAQ,aAChE,EACAvD,EAAC,SAAA,CACG,MAAM,eACN,QAAUkF,GAAM,CACZA,EAAE,gBAAA,EACFV,EAAM,sBAAsB,CAChC,EACH,SAAA,CAAA,YACYvE,EAAC,IAAA,CAAE,MAAM,oBAAA,CAAqB,CAAA,CAAA,CAAA,CAC3C,EACJ,EAEAA,EAAC,MAAA,CAAI,MAAM,uBACP,WAAC,MAAA,CAAI,MAAM,aACN,SAAA4D,GAAO,MAAM,EAAG,CAAC,EAAE,IAAKkE,GACrB9H,EAAC,SAAA,CAEG,MAAO,aAAasD,IAAgBwE,EAAM,GAAG,SAAA,EAAa,SAAW,EAAE,GACvE,QAAS,IAAMvE,EAAeuE,EAAM,GAAG,UAAU,EAEhD,SAAAA,EAAM,IAAA,EAJFA,EAAM,EAAA,CAMlB,EACL,CAAA,CACJ,EAEA9H,EAAC,MAAA,CAAI,MAAM,gBACP,SAAAA,EAAC,MAAA,CAAI,MAAM,gBACN,SAAA0H,GAAmBpE,CAAW,CAAA,CACnC,CAAA,CACJ,CAAA,EACJ,EAECT,IAAc,OAAS2B,EAAc,qBAAsB1D,EAAU,OAAWsB,EAAe,EAE/FS,IAAc,MAAQ2B,EAAc,iBAAkBzD,EAAe,QAASsB,EAAoB,EAClGQ,IAAc,MAAQ2B,EAAc,qBAAsBpD,GAAkB,QAASsB,EAAuB,EAC5GG,IAAc,SAAW2B,EAAc,mBAAoBxD,EAAW,KAAMsB,EAAgB,GAE3FO,IAAc,OAASA,IAAc,UAAY2B,EAAc,mBAAoBvD,EAAgB,QAASsB,EAAqB,GACjIM,IAAc,OAASA,IAAc,UAAY2B,EAAc,kBAAmBrD,GAAgB,QAASsB,EAAqB,GAEhII,IAAc,OAASA,IAAc,OAAS2B,EAAc,qBAAsBtD,GAAY,KAAMsB,EAAiB,GACrHK,IAAc,OAASA,IAAc,OAAS2B,EAAc,eAAgBnD,GAAe,KAAMsB,EAAoB,CAAA,EAC3H,CAER"}