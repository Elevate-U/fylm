import{a as G,B as o,u as e,H as P,n as T,$ as U}from"./index-MrGnfflC.js";import{d as s,y as E}from"./react-vendor-BYlzYzcd.js";import{u as V,a as j,b as q}from"./seoUtils-Dl604mDg.js";const X=()=>{const[S,u]=s([]),[L,F]=s([]),[h,l]=s(!0),[C,m]=s(null),[r,D]=s(1),[p,f]=s(1),[b,_]=s(""),[g,k]=s(""),[d,w]=s([]),[A,x]=s(!1),[R,N]=s(!1),{user:M}=G(),n=12;E(()=>{V("Blog - Latest Articles & Insights"),j("Discover the latest articles, insights, and updates from our blog. Stay informed with our expert content."),q({title:"Blog - Latest Articles & Insights",description:"Discover the latest articles, insights, and updates from our blog.",image:"/android-chrome-512x512.png",url:window.location.href}),$()},[]),E(()=>{(async()=>{if(M)try{const a=await o.isAdmin();N(a)}catch(a){console.error("Error checking admin status:",a),N(!1)}else N(!1)})()},[M]);const $=async()=>{try{l(!0);const[t,a]=await Promise.all([o.getPublishedPosts({limit:n,offset:0}),o.getCategories()]);u(t.posts),f(Math.ceil(t.total/n)),F(a)}catch(t){m("Failed to load blog content"),console.error("Error loading blog data:",t)}finally{l(!1)}},y=async t=>{try{l(!0);const a=(t-1)*n,i=await o.getPublishedPosts({limit:n,offset:a,categorySlug:b});u(i.posts),D(t),f(Math.ceil(i.total/n))}catch{m("Failed to load posts")}finally{l(!1)}},B=async t=>{try{l(!0),_(t),D(1);const a=await o.getPublishedPosts({limit:n,offset:0,categorySlug:t});u(a.posts),f(Math.ceil(a.total/n))}catch{m("Failed to filter posts")}finally{l(!1)}},H=async t=>{if(t.preventDefault(),!!g.trim())try{x(!0);const a=await o.getPublishedPosts({limit:50,offset:0,searchTerm:g});w(a.posts)}catch{m("Search failed")}finally{x(!1)}},O=()=>{k(""),w([])},Q=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(p<=1)return null;const t=[],a=5;let i=Math.max(1,r-Math.floor(a/2)),v=Math.min(p,i+a-1);v-i+1<a&&(i=Math.max(1,v-a+1));for(let c=i;c<=v;c++)t.push(e("button",{onClick:()=>y(c),className:`pagination-btn ${r===c?"active":""}`,disabled:h,children:c},c));return e("div",{className:"pagination",children:[e("button",{onClick:()=>y(r-1),disabled:r===1||h,className:"pagination-btn",children:"Previous"}),t,e("button",{onClick:()=>y(r+1),disabled:r===p||h,className:"pagination-btn",children:"Next"})]})},I=d.length>0?d:S;return h&&S.length===0?e("div",{className:"app",children:[e(P,{}),e("main",{className:"main-content",children:e("div",{className:"container",children:e("div",{className:"loading-container",children:[e("div",{className:"loading-spinner"}),e("p",{children:"Loading blog posts..."})]})})})]}):C?e("div",{className:"app",children:[e(P,{}),e("main",{className:"main-content",children:e("div",{className:"container",children:e("div",{className:"error-container",children:[e("h2",{children:"Oops! Something went wrong"}),e("p",{children:C}),e("button",{onClick:$,className:"btn btn-primary",children:"Try Again"})]})})})]}):e("div",{className:"app",children:[e(P,{}),e("main",{className:"main-content",children:e("div",{className:"container",children:[e("div",{className:"page-header",children:[e("h1",{children:"Blog"}),e("p",{children:"Discover insights, updates, and stories from our team"})]}),e("div",{className:"blog-controls",children:[e("form",{onSubmit:H,className:"search-form",children:e("div",{className:"search-input-group",children:[e("input",{type:"text",placeholder:"Search articles...",value:g,onChange:t=>k(t.target.value),className:"search-input"}),e("button",{type:"submit",disabled:A,className:"btn btn-primary",children:A?"Searching...":"Search"}),d.length>0&&e("button",{type:"button",onClick:O,className:"btn btn-secondary",children:"Clear"})]})}),e("div",{className:"category-filters",children:[e("button",{onClick:()=>B(""),className:`filter-btn ${b===""?"active":""}`,children:"All"}),L.map(t=>e("button",{onClick:()=>B(t.slug),className:`filter-btn ${b===t.slug?"active":""}`,children:t.name},t.id))]})]}),e("div",{className:"blog-content",children:[I.length===0?e("div",{className:"empty-state",children:[e("h3",{children:"No posts found"}),e("p",{children:d.length===0&&g?"Try a different search term.":"Check back later for new content."})]}):e("div",{className:"posts-grid",children:I.map(t=>e("article",{className:"post-card",children:[t.featured_image&&e("div",{className:"post-image",children:e("img",{src:t.featured_image,alt:t.title,loading:"lazy"})}),e("div",{className:"post-content",children:[e("div",{className:"post-meta",children:[e("span",{className:"post-category",children:t.category_name}),e("span",{className:"post-date",children:Q(t.created_at)})]}),e("h2",{className:"post-title",children:e(T,{href:`/blog/${t.slug}`,children:t.title})}),e("p",{className:"post-excerpt",children:t.excerpt}),t.tags&&t.tags.length>0&&e("div",{className:"post-tags",children:t.tags.map(a=>e("span",{className:"tag",children:a},a))}),e("div",{className:"post-actions",children:[e(T,{href:`/blog/${t.slug}`,className:"read-more",children:"Read More →"}),R&&e("button",{className:"edit-btn",onClick:()=>U(`/blog/admin?edit=${t.id}`),title:"Edit this post",children:"✏️ Edit"})]})]})]},t.id))}),d.length===0&&z()]})]})})]})};export{X as default};
//# sourceMappingURL=Blog-7NgCxPGW.js.map
