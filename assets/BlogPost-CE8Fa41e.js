import{b as S,B as h,u as e,H as g,L as C,E as n,$ as T}from"./index-Db6xGWP3.js";import{d as l,y,k as i}from"./react-vendor-BYlzYzcd.js";import{u as E,a as R,b as A,c as F,d as I}from"./seoUtils-Dl604mDg.js";const U=({slug:o})=>{const[r,_]=l(null),[p,v]=l([]),[w,m]=l(!0),[u,c]=l(null),[k,s]=l(!1),{user:f}=S();y(()=>{o&&x()},[o]),y(()=>{(async()=>{if(f)try{const a=await h.isAdmin();s(a)}catch(a){console.error("Error checking admin status:",a),s(!1)}else s(!1)})()},[f]);const x=async()=>{try{m(!0),c(null);const t=await h.getPostBySlug(o);if(!t){c("Blog post not found");return}_(t),$(t);const a=await h.getRelatedPosts(t.id,t.category_id,t.tags,3);v(a)}catch(t){console.error("Error loading blog post:",t),c("Failed to load blog post")}finally{m(!1)}},$=t=>{const a=t.meta_title||`${t.title} | Fylm Blog`;E(a);const d=t.meta_description||t.excerpt||`Read ${t.title} on Fylm Blog. ${t.category_name} content and more.`;R(d),A({title:t.title,description:d,image:t.featured_image_url||"/android-chrome-512x512.png",type:"article",url:window.location.href}),F(window.location.href),I({"@context":"https://schema.org","@type":"BlogPosting",headline:t.title,description:d,image:t.featured_image_url||"/android-chrome-512x512.png",author:{"@type":"Person",name:"Fylm Editorial Team"},publisher:{"@type":"Organization",name:"Fylm",logo:{"@type":"ImageObject",url:"/android-chrome-512x512.png"}},datePublished:t.published_at,dateModified:t.updated_at||t.published_at,mainEntityOfPage:{"@type":"WebPage","@id":window.location.href},articleSection:t.category_name,keywords:t.tags?.join(", ")||"",wordCount:t.content?t.content.replace(/<[^>]*>/g,"").split(" ").length:0,timeRequired:`PT${t.read_time||5}M`})},b=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),B=t=>{let a=t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>");return a=a.replace(/href="\/movie\//g,'href="/#/movie/').replace(/href="\/tv\//g,'href="/#/tv/').replace(/href="#\//g,'href="/#/').replace(/href="\/#\/#\//g,'href="/#/'),a};return w?e(i,{children:[e(g,{}),e("main",{class:"container blog-post-page",children:e(C,{})})]}):u||!r?e(i,{children:[e(g,{}),e("main",{class:"container blog-post-page",children:e("div",{class:"error-message",children:[e("h1",{children:"Post Not Found"}),e("p",{children:u||"The blog post you are looking for does not exist."}),e(n,{href:"/blog",class:"back-to-blog-btn",children:"← Back to Blog"})]})})]}):e(i,{children:[e(g,{}),e("div",{class:"blog-hero",children:e("div",{class:"hero-content",children:[e("nav",{class:"breadcrumb",children:[e(n,{href:"/",children:"Home"}),e("span",{class:"separator",children:"›"}),e(n,{href:"/blog",children:"Blog"}),r.category_name&&e(i,{children:[e("span",{class:"separator",children:"›"}),e(n,{href:`/blog?category=${r.category_slug}`,children:r.category_name})]})]}),r.category_name&&e("div",{class:"post-category",style:`background-color: ${r.category_color}`,children:r.category_name}),e("h1",{class:"hero-title",children:r.title}),r.excerpt&&e("div",{class:"hero-excerpt",children:r.excerpt}),e("div",{class:"hero-meta",children:[e("div",{class:"meta-left",children:[e("time",{class:"post-date",dateTime:r.published_at,children:b(r.published_at)}),e("span",{class:"separator",children:"•"}),e("span",{class:"post-read-time",children:[r.read_time," min read"]}),e("span",{class:"separator",children:"•"}),e("span",{class:"post-views",children:[r.view_count," views"]})]}),k&&e("div",{class:"meta-right",children:e("button",{class:"edit-post-btn",onClick:()=>T(`/blog/admin?edit=${r.id}`),title:"Edit this post",children:"✏️ Edit Post"})})]})]})}),e("main",{class:"blog-post-main",children:[e("article",{class:"blog-post-article",children:[r.featured_image_url&&e("div",{class:"post-featured-image",children:e("img",{src:r.featured_image_url,alt:r.title,loading:"lazy"})}),e("div",{class:"post-content",children:e("div",{class:"content-body",dangerouslySetInnerHTML:{__html:B(r.content)}})}),r.tags&&r.tags.length>0&&e("div",{class:"post-tags",children:e("div",{class:"tags-list",children:r.tags.map(t=>e("span",{class:"tag",children:["#",t.replace(" ","")]},t))})}),e("div",{class:"post-sharing",children:e("div",{class:"sharing-buttons",children:[e("a",{href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(r.title)}&url=${encodeURIComponent(window.location.href)}`,target:"_blank",rel:"noopener noreferrer",class:"share-btn twitter",children:"Share on Twitter"}),e("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,target:"_blank",rel:"noopener noreferrer",class:"share-btn facebook",children:"Share on Facebook"}),e("button",{class:"share-btn copy-link",onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:"Copy Link"})]})})]}),p.length>0&&e("section",{class:"related-posts",children:[e("h2",{children:"Related Posts"}),e("div",{class:"related-posts-grid",children:p.map(t=>e("article",{class:"related-post-card",children:[t.featured_image_url&&e("div",{class:"related-post-image",children:e("img",{src:t.featured_image_url,alt:t.title,loading:"lazy"})}),e("div",{class:"related-post-content",children:[t.blog_categories&&e("div",{class:"related-post-category",style:`background-color: ${t.blog_categories.color}`,children:t.blog_categories.name}),e("h3",{class:"related-post-title",children:e(n,{href:`/blog/${t.slug}`,children:t.title})}),t.excerpt&&e("p",{class:"related-post-excerpt",children:t.excerpt}),e("div",{class:"related-post-meta",children:[e("time",{dateTime:t.published_at,children:b(t.published_at)}),e("span",{children:[t.read_time," min read"]})]})]})]},t.id))})]}),e("div",{class:"post-navigation",children:e(n,{href:"/blog",class:"back-to-blog-btn",children:"← Back to Blog"})})]})]})};export{U as default};
//# sourceMappingURL=BlogPost-CE8Fa41e.js.map
