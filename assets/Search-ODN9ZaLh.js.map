{"version":3,"file":"Search-ODN9ZaLh.js","sources":["../../src/pages/Search.jsx"],"sourcesContent":["import { h } from 'preact';\nimport { useState, useEffect, useRef } from 'preact/hooks';\nimport MovieCard from '../components/MovieCard';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport './Home.css'; // Re-use some styling\nimport './Search.css'; // Import new styles\nimport { API_BASE_URL } from '../config';\n\nconst SearchPage = (props) => {\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState('');\n  const [searchFilter, setSearchFilter] = useState('all');\n  const [language, setLanguage] = useState('en-US');\n  const [sortBy, setSortBy] = useState('popularity.desc');\n  const [dataSources, setDataSources] = useState({\n    anilist: false,\n    tmdb: false\n  });\n  const debounceRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(props.url?.split('?')[1] || '');\n    const q = urlParams.get('q');\n    const filter = urlParams.get('filter') || 'all';\n    const lang = urlParams.get('lang') || 'en-US';\n    \n    setQuery(q || '');\n    setSearchFilter(filter);\n    setLanguage(lang);\n\n    if (q) {\n      performSearch(q, filter, lang, sortBy);\n    } else {\n      setResults([]);\n    }\n  }, [props.url]);\n\n  // Cleanup debounce timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (debounceRef.current) {\n        clearTimeout(debounceRef.current);\n      }\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const performSearch = async (searchQuery, filter = 'all', searchLanguage = language, sort = sortBy) => {\n    setLoading(true);\n    try {\n      // First try our new unified search endpoint with language support\n      const unifiedUrl = `${API_BASE_URL}/search/unified?query=${encodeURIComponent(searchQuery)}&type=${filter}&language=${encodeURIComponent(searchLanguage)}&sort_by=${sort}`;\n      const unifiedRes = await fetch(unifiedUrl);\n      \n      if (unifiedRes.ok) {\n        const unifiedData = await unifiedRes.json();\n        \n        // Update data sources state with defensive checks\n        setDataSources({\n          anilist: unifiedData.anilist && Array.isArray(unifiedData.anilist) && unifiedData.anilist.length > 0,\n          tmdb: unifiedData.tmdb && (\n            (unifiedData.tmdb.movies && Array.isArray(unifiedData.tmdb.movies) && unifiedData.tmdb.movies.length > 0) || \n            (unifiedData.tmdb.tv && Array.isArray(unifiedData.tmdb.tv) && unifiedData.tmdb.tv.length > 0)\n          )\n        });\n        \n        // Use combined results with defensive check\n        if (unifiedData.combined && Array.isArray(unifiedData.combined)) {\n          setResults(unifiedData.combined);\n        } else {\n          console.warn('Combined data is missing or not an array');\n          setResults([]);\n        }\n        \n        setLoading(false);\n        return;\n      }\n      \n      // Fallback to traditional TMDB search if unified endpoint fails\n      console.log('Falling back to TMDB search API');\n      const res = await fetch(`${API_BASE_URL}/tmdb/search/multi?query=${encodeURIComponent(searchQuery)}&language=${encodeURIComponent(searchLanguage)}`);\n      const data = await res.json();\n      \n      if (data && data.results) {\n        // Filter results based on selected filter\n        let filteredResults = data.results;\n        \n        if (filter !== 'all') {\n          filteredResults = filteredResults.filter(item => item.media_type === filter);\n        }\n        \n        const validResults = filteredResults.filter(item => \n          (item.media_type === 'movie' || item.media_type === 'tv') && \n          (item.poster_path || item.backdrop_path)\n        );\n        \n        const uniqueResults = validResults.filter((item, index, self) =>\n          index === self.findIndex((t) => t.id === item.id && t.media_type === item.media_type)\n        );\n        \n        setResults(uniqueResults);\n        \n        // Set data source to TMDB only\n        setDataSources({\n          anilist: false,\n          tmdb: true\n        });\n      }\n    } catch (error) {\n      console.error(\"Error performing search:\", error);\n      setResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFilterChange = (newFilter) => {\n    setSearchFilter(newFilter);\n    if (query.trim()) {\n      performSearch(query, newFilter, language, sortBy);\n    }\n    \n    // Update URL without reloading page\n    const url = new URL(window.location);\n    url.searchParams.set('q', query);\n    url.searchParams.set('filter', newFilter);\n    url.searchParams.set('lang', language);\n    window.history.pushState({}, '', url.toString());\n  };\n\n  const handleLanguageChange = (newLanguage) => {\n    setLanguage(newLanguage);\n    if (query.trim()) {\n      performSearch(query, searchFilter, newLanguage, sortBy);\n    }\n    \n    // Update URL without reloading page\n    const url = new URL(window.location);\n    url.searchParams.set('q', query);\n    url.searchParams.set('filter', searchFilter);\n    url.searchParams.set('lang', newLanguage);\n    window.history.pushState({}, '', url.toString());\n  };\n\n  const debouncedSearch = (searchQuery, filter, searchLanguage, sort) => {\n    // Clear existing timeout\n    if (debounceRef.current) {\n      clearTimeout(debounceRef.current);\n    }\n    \n    // Set new timeout for debounced search\n    debounceRef.current = setTimeout(() => {\n      if (searchQuery.trim()) {\n        performSearch(searchQuery.trim(), filter, searchLanguage, sort);\n      } else {\n        setResults([]);\n        setDataSources({ anilist: false, tmdb: false });\n      }\n    }, 500); // 500ms delay\n  };\n\n  const handleInputChange = (e) => {\n    const newQuery = e.target.value;\n    setQuery(newQuery);\n\n    // Update URL dynamically as user types\n    const url = new URL(window.location);\n    url.searchParams.set('q', newQuery);\n    url.searchParams.set('filter', searchFilter);\n    url.searchParams.set('lang', language);\n    window.history.replaceState({}, '', url.toString());\n\n    // Trigger debounced search\n    debouncedSearch(newQuery, searchFilter, language, sortBy);\n  };\n\n  // Helper to render movie/TV/anime cards with source badges\n  const renderResultCard = (item, index) => (\n    <div key={`${item.media_type || 'item'}-${item.id}-${index}`} className=\"movie-card-container\">\n      <MovieCard \n        item={item} \n        type={item.media_type || (item.episodes ? 'anime' : 'movie')}\n        progress={null}\n        duration={null}\n      />\n      {item.source && (\n        <div className={`source-badge source-${item.source}`}>\n          {item.source === 'anilist' ? 'AL' : 'TMDB'}\n        </div>\n      )}\n    </div>\n  );\n\n  const handleSearchSubmit = (e) => {\n    e.preventDefault();\n    if (query.trim()) {\n      performSearch(query.trim(), searchFilter, language, sortBy);\n    }\n  };\n\n  const handleSortChange = (newSort) => {\n    setSortBy(newSort);\n    if (query.trim()) {\n      performSearch(query, searchFilter, language, newSort);\n    }\n\n    const url = new URL(window.location);\n    url.searchParams.set('q', query);\n    url.searchParams.set('filter', searchFilter);\n    url.searchParams.set('lang', language);\n    url.searchParams.set('sort_by', newSort);\n    window.history.pushState({}, '', url.toString());\n  };\n\n  return (\n    <div className=\"container home-page\">\n      <div className=\"search-header\">\n        {/* New Search Form */}\n        <form onSubmit={handleSearchSubmit} className=\"search-form-container\">\n          <input\n            type=\"text\"\n            value={query}\n            onInput={handleInputChange}\n            placeholder=\"Search for movies, TV shows, or anime...\"\n            className=\"search-input-field\"\n            autofocus\n          />\n          <button type=\"submit\" className=\"search-submit-button\">Search</button>\n        </form>\n\n        <h1 className=\"main-title\">Search Results</h1>\n        <div className=\"search-query-display\">\n          <span className=\"search-label\">Showing results for:</span>\n          <span className=\"search-query\">\"{query}\"</span>\n        </div>\n        \n        {/* Source indicators */}\n        <div className=\"search-sources\">\n          {dataSources.anilist && <span className=\"data-source anilist\">AniList</span>}\n          {dataSources.tmdb && <span className=\"data-source tmdb\">TMDB</span>}\n        </div>\n        \n        {/* Filter tabs */}\n        <div className=\"search-filters\">\n          <button \n            className={`filter-btn ${searchFilter === 'all' ? 'active' : ''}`}\n            onClick={() => handleFilterChange('all')}\n          >\n            All\n          </button>\n          <button \n            className={`filter-btn ${searchFilter === 'movie' ? 'active' : ''}`}\n            onClick={() => handleFilterChange('movie')}\n          >\n            Movies\n          </button>\n          <button \n            className={`filter-btn ${searchFilter === 'tv' ? 'active' : ''}`}\n            onClick={() => handleFilterChange('tv')}\n          >\n            TV Shows\n          </button>\n          <button\n            className={`filter-btn ${searchFilter === 'anime' ? 'active' : ''}`}\n            onClick={() => handleFilterChange('anime')}\n          >\n            Anime\n          </button>\n        </div>\n        \n        {/* Language selector */}\n        <div className=\"sort-controls\">\n          <label htmlFor=\"sort-by\">Sort By:</label>\n          <select id=\"sort-by\" value={sortBy} onChange={(e) => handleSortChange(e.target.value)} className=\"glassmorphic-dropdown\">\n            <option value=\"popularity.desc\">Popularity Desc</option>\n            <option value=\"popularity.asc\">Popularity Asc</option>\n            <option value=\"release_date.desc\">Release Date Desc</option>\n            <option value=\"release_date.asc\">Release Date Asc</option>\n            <option value=\"vote_average.desc\">Rating Desc</option>\n            <option value=\"vote_average.asc\">Rating Asc</option>\n          </select>\n        </div>\n\n        <div className=\"language-selector\">\n          <label htmlFor=\"language-select\" className=\"language-label\">Language:</label>\n          <select \n            id=\"language-select\"\n            value={language} \n            onChange={(e) => handleLanguageChange(e.target.value)}\n            className=\"language-select\"\n          >\n            <option value=\"en-US\">English</option>\n            <option value=\"es-ES\">Español</option>\n            <option value=\"fr-FR\">Français</option>\n            <option value=\"de-DE\">Deutsch</option>\n            <option value=\"it-IT\">Italiano</option>\n            <option value=\"pt-BR\">Português (Brasil)</option>\n            <option value=\"ja-JP\">日本語</option>\n            <option value=\"ko-KR\">한국어</option>\n            <option value=\"zh-CN\">中文 (简体)</option>\n            <option value=\"zh-TW\">中文 (繁體)</option>\n            <option value=\"ru-RU\">Русский</option>\n            <option value=\"ar-SA\">العربية</option>\n            <option value=\"hi-IN\">हिन्दी</option>\n            <option value=\"th-TH\">ไทย</option>\n            <option value=\"vi-VN\">Tiếng Việt</option>\n          </select>\n        </div>\n      </div>\n      \n      {loading ? (\n        <LoadingSpinner text=\"Searching across multiple sources...\" />\n      ) : (\n        results.length > 0 ? (\n          <section className=\"home-section\">\n            <h2>Found {results.length} result{results.length !== 1 ? 's' : ''}</h2>\n            <div className=\"movie-grid\">\n              {results.map(renderResultCard)}\n            </div>\n          </section>\n        ) : query ? (\n          <div className=\"no-results\">\n            <div className=\"no-results-icon\">🔍</div>\n            <h3>No results found</h3>\n            <p>We couldn't find anything for \"{query}\" in the {searchFilter === 'all' ? 'database' : searchFilter} category.</p>\n            <div className=\"search-suggestions\">\n              <p>Try:</p>\n              <ul>\n                <li>Using different keywords or spelling</li>\n                <li>Searching in a different category</li>\n                <li>Using the title in its original language</li>\n                <li>Searching for something more general</li>\n              </ul>\n            </div>\n          </div>\n        ) : (\n          <div className=\"search-welcome\">\n            <div className=\"search-welcome-icon\">🎬</div>\n            <h3>Start your search</h3>\n            <p>Search across multiple sources including TMDB and AniList.</p>\n          </div>\n        )\n      )}\n    </div>\n  );\n};\n\nexport default SearchPage;"],"names":["SearchPage","props","results","setResults","useState","loading","setLoading","query","setQuery","searchFilter","setSearchFilter","language","setLanguage","sortBy","setSortBy","dataSources","setDataSources","debounceRef","useRef","searchTimeoutRef","useEffect","urlParams","q","filter","lang","performSearch","searchQuery","searchLanguage","sort","unifiedUrl","API_BASE_URL","unifiedRes","unifiedData","data","filteredResults","item","uniqueResults","index","self","t","error","handleFilterChange","newFilter","url","handleLanguageChange","newLanguage","debouncedSearch","handleInputChange","e","newQuery","renderResultCard","jsxs","jsx","MovieCard","handleSearchSubmit","handleSortChange","newSort","LoadingSpinner"],"mappings":"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"}