import{A as T,u as e,L as z}from"./index-Db6xGWP3.js";import{d,A as $,y as D}from"./react-vendor-BYlzYzcd.js";import{M as W}from"./MovieCard-iltsSDRn.js";/* empty css             *//* empty css                  */const Y=N=>{const[g,h]=d([]),[q,f]=d(!1),[r,w]=d(""),[n,R]=d("all"),[l,A]=d("en-US"),[o,I]=d("popularity.desc"),[P,y]=d({anilist:!1,tmdb:!1}),p=$(null),C=$(null);D(()=>{const a=new URLSearchParams(N.url?.split("?")[1]||""),s=a.get("q"),i=a.get("filter")||"all",m=a.get("lang")||"en-US";w(s||""),R(i),A(m),s?u(s,i,m,o):h([])},[N.url]),D(()=>()=>{p.current&&clearTimeout(p.current),C.current&&clearTimeout(C.current)},[]);const u=async(a,s="all",i=l,m=o)=>{f(!0);try{const b=`${T}/search/unified?query=${encodeURIComponent(a)}&type=${s}&language=${encodeURIComponent(i)}&sort_by=${m}`,U=await fetch(b);if(U.ok){const t=await U.json();y({anilist:t.anilist&&Array.isArray(t.anilist)&&t.anilist.length>0,tmdb:t.tmdb&&(t.tmdb.movies&&Array.isArray(t.tmdb.movies)&&t.tmdb.movies.length>0||t.tmdb.tv&&Array.isArray(t.tmdb.tv)&&t.tmdb.tv.length>0)}),t.combined&&Array.isArray(t.combined)?h(t.combined):(console.warn("Combined data is missing or not an array"),h([])),f(!1);return}console.log("Falling back to TMDB search API");const S=await(await fetch(`${T}/tmdb/search/multi?query=${encodeURIComponent(a)}&language=${encodeURIComponent(i)}`)).json();if(S&&S.results){let t=S.results;s!=="all"&&(t=t.filter(c=>c.media_type===s));const x=t.filter(c=>(c.media_type==="movie"||c.media_type==="tv")&&(c.poster_path||c.backdrop_path)).filter((c,V,j)=>V===j.findIndex(_=>_.id===c.id&&_.media_type===c.media_type));h(x),y({anilist:!1,tmdb:!0})}}catch(b){console.error("Error performing search:",b),h([])}finally{f(!1)}},v=a=>{R(a),r.trim()&&u(r,a,l,o);const s=new URL(window.location);s.searchParams.set("q",r),s.searchParams.set("filter",a),s.searchParams.set("lang",l),window.history.pushState({},"",s.toString())},L=a=>{A(a),r.trim()&&u(r,n,a,o);const s=new URL(window.location);s.searchParams.set("q",r),s.searchParams.set("filter",n),s.searchParams.set("lang",a),window.history.pushState({},"",s.toString())},B=(a,s,i,m)=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{a.trim()?u(a.trim(),s,i,m):(h([]),y({anilist:!1,tmdb:!1}))},500)},k=a=>{const s=a.target.value;w(s);const i=new URL(window.location);i.searchParams.set("q",s),i.searchParams.set("filter",n),i.searchParams.set("lang",l),window.history.replaceState({},"",i.toString()),B(s,n,l,o)},F=(a,s)=>e("div",{className:"movie-card-container",children:[e(W,{item:a,type:a.media_type||(a.episodes?"anime":"movie"),progress:null,duration:null}),a.source&&e("div",{className:`source-badge source-${a.source}`,children:a.source==="anilist"?"AL":"TMDB"})]},`${a.media_type||"item"}-${a.id}-${s}`),M=a=>{a.preventDefault(),r.trim()&&u(r.trim(),n,l,o)},E=a=>{I(a),r.trim()&&u(r,n,l,a);const s=new URL(window.location);s.searchParams.set("q",r),s.searchParams.set("filter",n),s.searchParams.set("lang",l),s.searchParams.set("sort_by",a),window.history.pushState({},"",s.toString())};return e("div",{className:"container home-page",children:[e("div",{className:"search-header",children:[e("form",{onSubmit:M,className:"search-form-container",children:[e("input",{type:"text",value:r,onInput:k,placeholder:"Search for movies, TV shows, or anime...",className:"search-input-field",autofocus:!0}),e("button",{type:"submit",className:"search-submit-button",children:"Search"})]}),e("h1",{className:"main-title",children:"Search Results"}),e("div",{className:"search-query-display",children:[e("span",{className:"search-label",children:"Showing results for:"}),e("span",{className:"search-query",children:['"',r,'"']})]}),e("div",{className:"search-sources",children:[P.anilist&&e("span",{className:"data-source anilist",children:"AniList"}),P.tmdb&&e("span",{className:"data-source tmdb",children:"TMDB"})]}),e("div",{className:"search-filters",children:[e("button",{className:`filter-btn ${n==="all"?"active":""}`,onClick:()=>v("all"),children:"All"}),e("button",{className:`filter-btn ${n==="movie"?"active":""}`,onClick:()=>v("movie"),children:"Movies"}),e("button",{className:`filter-btn ${n==="tv"?"active":""}`,onClick:()=>v("tv"),children:"TV Shows"}),e("button",{className:`filter-btn ${n==="anime"?"active":""}`,onClick:()=>v("anime"),children:"Anime"})]}),e("div",{className:"sort-controls",children:[e("label",{htmlFor:"sort-by",children:"Sort By:"}),e("select",{id:"sort-by",value:o,onChange:a=>E(a.target.value),className:"glassmorphic-dropdown",children:[e("option",{value:"popularity.desc",children:"Popularity Desc"}),e("option",{value:"popularity.asc",children:"Popularity Asc"}),e("option",{value:"release_date.desc",children:"Release Date Desc"}),e("option",{value:"release_date.asc",children:"Release Date Asc"}),e("option",{value:"vote_average.desc",children:"Rating Desc"}),e("option",{value:"vote_average.asc",children:"Rating Asc"})]})]}),e("div",{className:"language-selector",children:[e("label",{htmlFor:"language-select",className:"language-label",children:"Language:"}),e("select",{id:"language-select",value:l,onChange:a=>L(a.target.value),className:"language-select",children:[e("option",{value:"en-US",children:"English"}),e("option",{value:"es-ES",children:"Espa√±ol"}),e("option",{value:"fr-FR",children:"Fran√ßais"}),e("option",{value:"de-DE",children:"Deutsch"}),e("option",{value:"it-IT",children:"Italiano"}),e("option",{value:"pt-BR",children:"Portugu√™s (Brasil)"}),e("option",{value:"ja-JP",children:"Êó•Êú¨Ë™û"}),e("option",{value:"ko-KR",children:"ÌïúÍµ≠Ïñ¥"}),e("option",{value:"zh-CN",children:"‰∏≠Êñá (ÁÆÄ‰Ωì)"}),e("option",{value:"zh-TW",children:"‰∏≠Êñá (ÁπÅÈ´î)"}),e("option",{value:"ru-RU",children:"–†—É—Å—Å–∫–∏–π"}),e("option",{value:"ar-SA",children:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"}),e("option",{value:"hi-IN",children:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä"}),e("option",{value:"th-TH",children:"‡πÑ‡∏ó‡∏¢"}),e("option",{value:"vi-VN",children:"Ti·∫øng Vi·ªát"})]})]})]}),q?e(z,{text:"Searching across multiple sources..."}):g.length>0?e("section",{className:"home-section",children:[e("h2",{children:["Found ",g.length," result",g.length!==1?"s":""]}),e("div",{className:"movie-grid",children:g.map(F)})]}):r?e("div",{className:"no-results",children:[e("div",{className:"no-results-icon",children:"üîç"}),e("h3",{children:"No results found"}),e("p",{children:[`We couldn't find anything for "`,r,'" in the ',n==="all"?"database":n," category."]}),e("div",{className:"search-suggestions",children:[e("p",{children:"Try:"}),e("ul",{children:[e("li",{children:"Using different keywords or spelling"}),e("li",{children:"Searching in a different category"}),e("li",{children:"Using the title in its original language"}),e("li",{children:"Searching for something more general"})]})]})]}):e("div",{className:"search-welcome",children:[e("div",{className:"search-welcome-icon",children:"üé¨"}),e("h3",{children:"Start your search"}),e("p",{children:"Search across multiple sources including TMDB and AniList."})]})]})};export{Y as default};
//# sourceMappingURL=Search-BVsz4GAb.js.map
