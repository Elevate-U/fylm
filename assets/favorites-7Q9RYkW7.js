import{s as c,a as u,t as m}from"./index-DJKKYvGv.js";const M=async e=>{const{data:{user:i}}=await c.auth.getUser();if(!i){m.error("You need to be logged in to save favorites.");return}const a=e.id,r=e.type||"tv",{getState:v,setState:o}=u,l=v(),s=`${a}-${r}`;if(l.favoritedMedia.has(s))return;o(t=>({favorites:[{...e,type:r},...t.favorites],favoritedMedia:new Set(t.favoritedMedia).add(s)})),m.success(`'${e.name||e.title}' has been added to your Favorites.`);const{error:f}=await c.from("favorites").insert({user_id:i.id,media_id:a,media_type:r});f&&(console.error("Error adding favorite show:",f),o(t=>{const d=new Set(t.favoritedMedia);return d.delete(s),{favoritedMedia:d,favorites:t.favorites.filter(n=>n.id!==a)}}))},g=async e=>{const{data:{user:i}}=await c.auth.getUser();if(!i)return;const a=e.id,r=e.type||"tv",{getState:v,setState:o}=u,l=`${a}-${r}`,s=v().favorites,f=v().favoritedMedia;o(d=>({favorites:d.favorites.filter(n=>n.id!==a),favoritedMedia:new Set([...d.favoritedMedia].filter(n=>n!==l))})),m.error(`'${e.name||e.title}' has been removed from your Favorites.`);const{error:t}=await c.from("favorites").delete().match({user_id:i.id,media_id:a,media_type:r});t&&(console.error("Error removing favorite show:",t),o({favorites:s,favoritedMedia:f}),m.error(`Failed to remove '${e.name||e.title}' from favorites.`))};export{M as a,g as r};
//# sourceMappingURL=favorites-7Q9RYkW7.js.map
